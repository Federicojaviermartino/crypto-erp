{"version":3,"sources":["../../../../src/modules/ai/dto/chat.dto.ts"],"sourcesContent":["import { ApiProperty } from '@nestjs/swagger';\nimport { IsArray, IsString, IsOptional, ValidateNested, IsIn } from 'class-validator';\nimport { Type } from 'class-transformer';\n\nclass ChatMessageDto {\n  @ApiProperty({ enum: ['user', 'assistant'], description: 'Message role' })\n  @IsIn(['user', 'assistant'])\n  role: 'user' | 'assistant';\n\n  @ApiProperty({ description: 'Message content' })\n  @IsString()\n  content: string;\n}\n\nclass AiContextDto {\n  @ApiProperty({ required: false, description: 'Company name' })\n  @IsOptional()\n  @IsString()\n  companyName?: string;\n\n  @ApiProperty({ required: false, description: 'Current fiscal year' })\n  @IsOptional()\n  @IsString()\n  fiscalYear?: string;\n\n  @ApiProperty({ required: false, description: 'Recent transactions summary' })\n  @IsOptional()\n  @IsString()\n  recentTransactions?: string;\n\n  @ApiProperty({ required: false, description: 'Account balances summary' })\n  @IsOptional()\n  @IsString()\n  accountBalances?: string;\n\n  @ApiProperty({\n    required: false,\n    enum: ['es', 'en'],\n    description: 'Response language (Spanish or English)',\n    default: 'es'\n  })\n  @IsOptional()\n  @IsIn(['es', 'en'])\n  language?: 'es' | 'en';\n}\n\nexport class ChatRequestDto {\n  @ApiProperty({ type: [ChatMessageDto], description: 'Conversation messages' })\n  @IsArray()\n  @ValidateNested({ each: true })\n  @Type(() => ChatMessageDto)\n  messages: ChatMessageDto[];\n\n  @ApiProperty({ required: false, type: AiContextDto, description: 'Additional context' })\n  @IsOptional()\n  @ValidateNested()\n  @Type(() => AiContextDto)\n  context?: AiContextDto;\n}\n\nexport class AnalyzeTransactionDto {\n  @ApiProperty({ description: 'Transaction description to analyze' })\n  @IsString()\n  description: string;\n}\n\nexport class GenerateReportDto {\n  @ApiProperty({\n    enum: ['summary', 'recommendations', 'tax-planning'],\n    description: 'Type of report to generate',\n  })\n  @IsIn(['summary', 'recommendations', 'tax-planning'])\n  reportType: 'summary' | 'recommendations' | 'tax-planning';\n\n  @ApiProperty({ description: 'Data for the report' })\n  data: Record<string, unknown>;\n}\n\nexport class ExplainCryptoTaxDto {\n  @ApiProperty({\n    description: 'Array of crypto transactions',\n    type: 'array',\n    items: {\n      type: 'object',\n      properties: {\n        type: { type: 'string' },\n        amount: { type: 'number' },\n        gainLoss: { type: 'number' },\n      },\n    },\n  })\n  @IsArray()\n  transactions: Array<{ type: string; amount: number; gainLoss?: number }>;\n}\n"],"names":["AnalyzeTransactionDto","ChatRequestDto","ExplainCryptoTaxDto","GenerateReportDto","ChatMessageDto","enum","description","AiContextDto","required","default","type","each","items","properties","amount","gainLoss"],"mappings":";;;;;;;;;;;QA4DaA;eAAAA;;QAdAC;eAAAA;;QAgCAC;eAAAA;;QAZAC;eAAAA;;;yBAlEe;gCACwC;kCAC/C;;;;;;;;;;AAErB,IAAA,AAAMC,iBAAN,MAAMA;AAQN;;;QAPiBC,MAAM;YAAC;YAAQ;SAAY;QAAEC,aAAa;;;QAClD;QAAQ;;;;;;QAGAA,aAAa;;;;;AAK9B,IAAA,AAAMC,eAAN,MAAMA;AA8BN;;;QA7BiBC,UAAU;QAAOF,aAAa;;;;;;;;QAK9BE,UAAU;QAAOF,aAAa;;;;;;;;QAK9BE,UAAU;QAAOF,aAAa;;;;;;;;QAK9BE,UAAU;QAAOF,aAAa;;;;;;;;QAM3CE,UAAU;QACVH,MAAM;YAAC;YAAM;SAAK;QAClBC,aAAa;QACbG,SAAS;;;;QAGJ;QAAM;;;;AAIR,IAAA,AAAMR,iBAAN,MAAMA;AAYb;;;QAXiBS,MAAM;YAACN;SAAe;QAAEE,aAAa;;;;QAElCK,MAAM;;oCACZP;;;;;QAGGI,UAAU;QAAOE,MAAMH;QAAcD,aAAa;;;;oCAGrDC;;;AAIP,IAAA,AAAMP,wBAAN,MAAMA;AAIb;;;QAHiBM,aAAa;;;;;AAKvB,IAAA,AAAMH,oBAAN,MAAMA;AAUb;;;QARIE,MAAM;YAAC;YAAW;YAAmB;SAAe;QACpDC,aAAa;;;QAER;QAAW;QAAmB;;;;;;QAGtBA,aAAa;;;;AAIvB,IAAA,AAAMJ,sBAAN,MAAMA;AAeb;;;QAbII,aAAa;QACbI,MAAM;QACNE,OAAO;YACLF,MAAM;YACNG,YAAY;gBACVH,MAAM;oBAAEA,MAAM;gBAAS;gBACvBI,QAAQ;oBAAEJ,MAAM;gBAAS;gBACzBK,UAAU;oBAAEL,MAAM;gBAAS;YAC7B;QACF"}