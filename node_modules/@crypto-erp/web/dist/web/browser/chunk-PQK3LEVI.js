import{d as P}from"./chunk-R5763NNK.js";import{a as w,c as W,e as B,l as G,m as O,n as U,r as V}from"./chunk-OE3B74VB.js";import{a as z}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{$a as x,Da as g,Db as R,Fb as N,Gb as F,Ha as v,Ia as M,Ja as u,Ma as b,Na as A,Oa as t,Pa as n,Qa as D,Sa as f,Ta as p,U as y,Za as i,_a as C,bb as T,cb as S,db as E,fb as I,hb as m,jb as c,ra as o,sa as L,xa as h}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";var k=(a,r)=>r.id;function H(a,r){a&1&&(t(0,"div",17),D(1,"span",18),n())}function K(a,r){if(a&1&&(i(0),m(1,"number")),a&2){let e=p().$implicit;x(" ",c(1,1,e.pricePerUnit,"1.2-2")," \u20AC ")}}function Y(a,r){a&1&&i(0," - ")}function j(a,r){if(a&1&&(i(0),m(1,"number")),a&2){let e=p().$implicit;x(" ",c(1,1,e.fiatValue,"1.2-2")," \u20AC ")}}function q(a,r){a&1&&i(0," - ")}function J(a,r){if(a&1&&(i(0),m(1,"number")),a&2){let e=p().$implicit;x(" ",c(1,1,e.realizedGainLoss,"1.2-2")," \u20AC ")}}function Q(a,r){a&1&&i(0," - ")}function X(a,r){if(a&1&&(t(0,"tr")(1,"td"),i(2),m(3,"date"),n(),t(4,"td")(5,"span",21),i(6),n()(),t(7,"td")(8,"strong"),i(9),n()(),t(10,"td",20),i(11),m(12,"number"),n(),t(13,"td",20),g(14,K,2,4)(15,Y,1,0),n(),t(16,"td",20),g(17,j,2,4)(18,q,1,0),n(),t(19,"td",20),g(20,J,2,4)(21,Q,1,0),n(),t(22,"td"),i(23),n()()),a&2){let e=r.$implicit,s=p(2);o(2),C(c(3,14,e.date,"dd/MM/yyyy HH:mm")),o(3),M(s.getTypeBadgeClass(e.type)),o(),x(" ",s.getTypeLabel(e.type)," "),o(3),C(e.asset==null?null:e.asset.symbol),o(2),C(c(12,17,e.amount,"1.8-8")),o(3),u(14,e.pricePerUnit?14:15),o(3),u(17,e.fiatValue?17:18),o(2),v("text-success",e.realizedGainLoss&&e.realizedGainLoss>0)("text-danger",e.realizedGainLoss&&e.realizedGainLoss<0),o(),u(20,e.realizedGainLoss!==null?20:21),o(3),C(e.exchange||"-")}}function Z(a,r){a&1&&(t(0,"tr")(1,"td",22),i(2," No se encontraron transacciones "),n()())}function $(a,r){if(a&1&&(t(0,"table",19)(1,"thead")(2,"tr")(3,"th"),i(4,"Fecha"),n(),t(5,"th"),i(6,"Tipo"),n(),t(7,"th"),i(8,"Activo"),n(),t(9,"th",20),i(10,"Cantidad"),n(),t(11,"th",20),i(12,"Precio"),n(),t(13,"th",20),i(14,"Valor"),n(),t(15,"th",20),i(16,"Ganancia/P\xE9rdida"),n(),t(17,"th"),i(18,"Exchange"),n()()(),t(19,"tbody"),b(20,X,24,20,"tr",null,k,!1,Z,3,0,"tr"),n()()),a&2){let e=p();o(20),A(e.transactions())}}var de=(()=>{class a{api;transactions=h([]);loading=h(!0);filterType="";startDate="";endDate="";constructor(e){this.api=e}ngOnInit(){this.loadTransactions()}loadTransactions(){this.loading.set(!0);let e={};this.filterType&&(e.type=this.filterType),this.startDate&&(e.startDate=this.startDate),this.endDate&&(e.endDate=this.endDate),this.api.get("/crypto/transactions",e).subscribe({next:s=>{this.transactions.set(s.transactions||[]),this.loading.set(!1)},error:()=>this.loading.set(!1)})}getTypeBadgeClass(e){return{BUY:"badge-success",SELL:"badge-danger",SWAP:"badge-info",TRANSFER_IN:"badge-success",TRANSFER_OUT:"badge-warning",STAKING_REWARD:"badge-info",AIRDROP:"badge-info",MINING:"badge-info"}[e]||"badge-secondary"}getTypeLabel(e){return{BUY:"Compra",SELL:"Venta",SWAP:"Intercambio",TRANSFER_IN:"Entrada",TRANSFER_OUT:"Salida",STAKING_REWARD:"Staking",AIRDROP:"Airdrop",MINING:"Miner\xEDa",FEE:"Comisi\xF3n"}[e]||e}static \u0275fac=function(s){return new(s||a)(L(z))};static \u0275cmp=y({type:a,selectors:[["app-transactions-list"]],standalone:!0,features:[I],decls:32,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],["routerLink","/crypto/transactions/new",1,"btn","btn-primary"],[1,"filters","card"],[1,"card-body","d-flex","gap-md"],[1,"form-select",2,"max-width","150px",3,"ngModelChange","ngModel"],["value",""],["value","BUY"],["value","SELL"],["value","SWAP"],["value","TRANSFER_IN"],["value","TRANSFER_OUT"],["value","STAKING_REWARD"],["type","date",1,"form-input",2,"max-width","150px",3,"ngModelChange","ngModel"],[1,"card"],[1,"card-body",2,"padding","0"],[1,"text-center","p-lg"],[1,"spinner"],[1,"table"],[1,"text-right"],[1,"badge"],["colspan","8",1,"text-center","text-muted","p-lg"]],template:function(s,l){s&1&&(t(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),i(4,"Transacciones Crypto"),n(),t(5,"p",2),i(6,"Historial de operaciones"),n()(),t(7,"a",3),i(8,"+ Nueva Transacci\xF3n"),n()(),t(9,"div",4)(10,"div",5)(11,"select",6),E("ngModelChange",function(d){return S(l.filterType,d)||(l.filterType=d),d}),f("ngModelChange",function(){return l.loadTransactions()}),t(12,"option",7),i(13,"Todos los tipos"),n(),t(14,"option",8),i(15,"Compra"),n(),t(16,"option",9),i(17,"Venta"),n(),t(18,"option",10),i(19,"Intercambio"),n(),t(20,"option",11),i(21,"Entrada"),n(),t(22,"option",12),i(23,"Salida"),n(),t(24,"option",13),i(25,"Staking"),n()(),t(26,"input",14),E("ngModelChange",function(d){return S(l.startDate,d)||(l.startDate=d),d}),f("ngModelChange",function(){return l.loadTransactions()}),n(),t(27,"input",14),E("ngModelChange",function(d){return S(l.endDate,d)||(l.endDate=d),d}),f("ngModelChange",function(){return l.loadTransactions()}),n()()(),t(28,"div",15)(29,"div",16),g(30,H,2,0,"div",17)(31,$,23,1),n()()()),s&2&&(o(11),T("ngModel",l.filterType),o(15),T("ngModel",l.startDate),o(),T("ngModel",l.endDate),o(3),u(30,l.loading()?30:31))},dependencies:[F,N,R,P,V,O,U,w,G,W,B],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-lg)}.filters[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}"]})}return a})();export{de as TransactionsListComponent};
