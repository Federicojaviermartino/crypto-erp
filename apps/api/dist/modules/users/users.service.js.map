{"version":3,"sources":["../../../src/modules/users/users.service.ts"],"sourcesContent":["import { Injectable, NotFoundException } from '@nestjs/common';\nimport { PrismaService } from '@crypto-erp/database';\nimport { UpdateUserDto } from './dto/index.js';\n\n@Injectable()\nexport class UsersService {\n  constructor(private prisma: PrismaService) {}\n\n  async findById(id: string) {\n    const user = await this.prisma.user.findUnique({\n      where: { id },\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        lastName: true,\n        avatarUrl: true,\n        isActive: true,\n        lastLoginAt: true,\n        createdAt: true,\n        updatedAt: true,\n      },\n    });\n\n    if (!user) {\n      throw new NotFoundException('User not found');\n    }\n\n    return user;\n  }\n\n  async update(id: string, dto: UpdateUserDto) {\n    const user = await this.prisma.user.findUnique({ where: { id } });\n    if (!user) {\n      throw new NotFoundException('User not found');\n    }\n\n    return this.prisma.user.update({\n      where: { id },\n      data: dto,\n      select: {\n        id: true,\n        email: true,\n        firstName: true,\n        lastName: true,\n        avatarUrl: true,\n        updatedAt: true,\n      },\n    });\n  }\n}\n"],"names":["UsersService","findById","id","user","prisma","findUnique","where","select","email","firstName","lastName","avatarUrl","isActive","lastLoginAt","createdAt","updatedAt","NotFoundException","update","dto","data"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBALiC;0BAChB;;;;;;;;;;AAIvB,IAAA,AAAMA,eAAN,MAAMA;IAGX,MAAMC,SAASC,EAAU,EAAE;QACzB,MAAMC,OAAO,MAAM,IAAI,CAACC,MAAM,CAACD,IAAI,CAACE,UAAU,CAAC;YAC7CC,OAAO;gBAAEJ;YAAG;YACZK,QAAQ;gBACNL,IAAI;gBACJM,OAAO;gBACPC,WAAW;gBACXC,UAAU;gBACVC,WAAW;gBACXC,UAAU;gBACVC,aAAa;gBACbC,WAAW;gBACXC,WAAW;YACb;QACF;QAEA,IAAI,CAACZ,MAAM;YACT,MAAM,IAAIa,yBAAiB,CAAC;QAC9B;QAEA,OAAOb;IACT;IAEA,MAAMc,OAAOf,EAAU,EAAEgB,GAAkB,EAAE;QAC3C,MAAMf,OAAO,MAAM,IAAI,CAACC,MAAM,CAACD,IAAI,CAACE,UAAU,CAAC;YAAEC,OAAO;gBAAEJ;YAAG;QAAE;QAC/D,IAAI,CAACC,MAAM;YACT,MAAM,IAAIa,yBAAiB,CAAC;QAC9B;QAEA,OAAO,IAAI,CAACZ,MAAM,CAACD,IAAI,CAACc,MAAM,CAAC;YAC7BX,OAAO;gBAAEJ;YAAG;YACZiB,MAAMD;YACNX,QAAQ;gBACNL,IAAI;gBACJM,OAAO;gBACPC,WAAW;gBACXC,UAAU;gBACVC,WAAW;gBACXI,WAAW;YACb;QACF;IACF;IA3CA,YAAY,AAAQX,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AA4C9C"}