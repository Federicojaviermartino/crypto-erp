{"version":3,"sources":["../../../src/modules/fiscal/modelo347.service.ts"],"sourcesContent":["import { Injectable, Logger } from '@nestjs/common';\nimport { PrismaService } from '@crypto-erp/database';\nimport { Decimal } from '@prisma/client/runtime/library';\nimport { create } from 'xmlbuilder2';\n\ninterface Modelo347Operation {\n  contactId: string;\n  contactName: string;\n  contactTaxId: string;\n  totalAmount: Decimal;\n  invoiceCount: number;\n  quarterBreakdown: {\n    Q1: Decimal;\n    Q2: Decimal;\n    Q3: Decimal;\n    Q4: Decimal;\n  };\n  cashOperations: Decimal; // Operations paid in cash/crypto >6,000€\n  realEstateOperations: Decimal; // Real estate operations\n}\n\ninterface Modelo347Data {\n  companyId: string;\n  fiscalYear: number;\n  declarantNif: string;\n  declarantName: string;\n  operations: Modelo347Operation[];\n  totalDeclared: Decimal;\n  operationCount: number;\n}\n\n@Injectable()\nexport class Modelo347Service {\n  private readonly logger = new Logger(Modelo347Service.name);\n  private readonly THRESHOLD = new Decimal(3005.01); // Minimum threshold for declaration\n\n  constructor(private readonly prisma: PrismaService) {}\n\n  /**\n   * Calculate Modelo 347 data for a fiscal year\n   * Detects all operations with third parties exceeding 3,005.01€\n   */\n  async calculateModelo347(\n    companyId: string,\n    fiscalYear: number,\n  ): Promise<Modelo347Data> {\n    this.logger.log(\n      `Calculating Modelo 347 for company ${companyId}, year ${fiscalYear}`,\n    );\n\n    // Get company data\n    const company = await this.prisma.company.findUniqueOrThrow({\n      where: { id: companyId },\n    });\n\n    // Get all invoices for the fiscal year\n    const startDate = new Date(fiscalYear, 0, 1); // Jan 1\n    const endDate = new Date(fiscalYear, 11, 31, 23, 59, 59); // Dec 31\n\n    const invoices = await this.prisma.invoice.findMany({\n      where: {\n        companyId,\n        issueDate: {\n          gte: startDate,\n          lte: endDate,\n        },\n        status: {\n          in: ['SENT', 'PAID', 'OVERDUE'], // Only final invoices\n        },\n        // Exclude intra-community and export (different tax regime)\n        counterpartyCountry: 'ES',\n      },\n      include: {\n        contact: true,\n        taxes: true,\n      },\n      orderBy: {\n        issueDate: 'asc',\n      },\n    });\n\n    this.logger.log(`Found ${invoices.length} invoices for fiscal year ${fiscalYear}`);\n\n    // Group by contact and aggregate\n    const operationsByContact = new Map<string, Modelo347Operation>();\n\n    for (const invoice of invoices) {\n      const contactKey = invoice.contactId || 'UNKNOWN';\n\n      if (!operationsByContact.has(contactKey)) {\n        operationsByContact.set(contactKey, {\n          contactId: contactKey,\n          contactName: invoice.counterpartyName,\n          contactTaxId: invoice.counterpartyTaxId || '',\n          totalAmount: new Decimal(0),\n          invoiceCount: 0,\n          quarterBreakdown: {\n            Q1: new Decimal(0),\n            Q2: new Decimal(0),\n            Q3: new Decimal(0),\n            Q4: new Decimal(0),\n          },\n          cashOperations: new Decimal(0),\n          realEstateOperations: new Decimal(0),\n        });\n      }\n\n      const operation = operationsByContact.get(contactKey)!;\n\n      // Add to total\n      const invoiceTotal = new Decimal(invoice.total.toString());\n      operation.totalAmount = operation.totalAmount.plus(invoiceTotal);\n      operation.invoiceCount++;\n\n      // Quarter breakdown\n      const quarter = this.getQuarter(invoice.issueDate);\n      operation.quarterBreakdown[quarter] = operation.quarterBreakdown[quarter].plus(invoiceTotal);\n\n      // Cash/crypto operations >6,000€ (special reporting)\n      if (\n        (invoice.paymentMethod === 'CASH' || invoice.cryptoPayment) &&\n        invoiceTotal.greaterThan(6000)\n      ) {\n        operation.cashOperations = operation.cashOperations.plus(invoiceTotal);\n      }\n    }\n\n    // Filter operations above threshold\n    const operations = Array.from(operationsByContact.values()).filter((op) =>\n      op.totalAmount.greaterThanOrEqualTo(this.THRESHOLD),\n    );\n\n    this.logger.log(\n      `Found ${operations.length} operations exceeding threshold of ${this.THRESHOLD}€`,\n    );\n\n    // Calculate totals\n    const totalDeclared = operations.reduce(\n      (sum, op) => sum.plus(op.totalAmount),\n      new Decimal(0),\n    );\n\n    return {\n      companyId,\n      fiscalYear,\n      declarantNif: company.taxId,\n      declarantName: company.name,\n      operations: operations.sort((a, b) =>\n        a.totalAmount.lessThan(b.totalAmount) ? 1 : -1,\n      ), // Descending order\n      totalDeclared,\n      operationCount: operations.length,\n    };\n  }\n\n  /**\n   * Generate XML file for AEAT submission (Modelo 347 format)\n   */\n  async generateXML(companyId: string, fiscalYear: number): Promise<string> {\n    const data = await this.calculateModelo347(companyId, fiscalYear);\n\n    this.logger.log(\n      `Generating Modelo 347 XML for ${data.declarantName} (${data.declarantNif}), year ${fiscalYear}`,\n    );\n\n    // Build XML according to AEAT schema\n    const doc = create({ version: '1.0', encoding: 'UTF-8' })\n      .ele('T347', {\n        xmlns: 'http://www.aeat.es/esquemas/declaraciones/Modelo347/v1_0',\n      })\n      .ele('Cabecera')\n      .ele('ModeloPresentacion').txt('347').up()\n      .ele('Ejercicio').txt(fiscalYear.toString()).up()\n      .ele('NIF').txt(data.declarantNif).up()\n      .ele('NombreRazon').txt(data.declarantName).up()\n      .up() // Close Cabecera\n      .ele('OperacionesDetalladas');\n\n    // Add each operation\n    for (let i = 0; i < data.operations.length; i++) {\n      const op = data.operations[i];\n\n      doc\n        .ele('Operacion')\n        .ele('NumeroOperacion').txt((i + 1).toString()).up()\n        .ele('NIF').txt(op.contactTaxId).up()\n        .ele('NombreRazon').txt(op.contactName).up()\n        .ele('ImporteAnual').txt(this.formatAmount(op.totalAmount)).up()\n        .ele('ClaveOperacion').txt('A').up() // A = Adquisiciones/Entregas\n        .ele('NumeroFacturas').txt(op.invoiceCount.toString()).up()\n        .ele('ImporteTrimestre1').txt(this.formatAmount(op.quarterBreakdown.Q1)).up()\n        .ele('ImporteTrimestre2').txt(this.formatAmount(op.quarterBreakdown.Q2)).up()\n        .ele('ImporteTrimestre3').txt(this.formatAmount(op.quarterBreakdown.Q3)).up()\n        .ele('ImporteTrimestre4').txt(this.formatAmount(op.quarterBreakdown.Q4)).up();\n\n      // Add cash operations if any\n      if (op.cashOperations.greaterThan(0)) {\n        doc.ele('OperacionesCobrosMetalico').txt('S').up();\n        doc.ele('ImporteCobrosMetalico').txt(this.formatAmount(op.cashOperations)).up();\n      }\n\n      doc.up(); // Close Operacion\n    }\n\n    doc.up(); // Close OperacionesDetalladas\n\n    // Add summary\n    doc\n      .ele('Resumen')\n      .ele('TotalOperaciones').txt(data.operationCount.toString()).up()\n      .ele('ImporteTotal').txt(this.formatAmount(data.totalDeclared)).up()\n      .up(); // Close Resumen\n\n    const xml = doc.end({ prettyPrint: true });\n\n    this.logger.log(\n      `Generated Modelo 347 XML: ${data.operationCount} operations, total ${this.formatAmount(data.totalDeclared)}€`,\n    );\n\n    return xml;\n  }\n\n  /**\n   * Generate CSV export for accounting software\n   */\n  async generateCSV(companyId: string, fiscalYear: number): Promise<string> {\n    const data = await this.calculateModelo347(companyId, fiscalYear);\n\n    const headers = [\n      'NIF/CIF',\n      'Nombre/Razón Social',\n      'Importe Total',\n      'Nº Facturas',\n      'T1',\n      'T2',\n      'T3',\n      'T4',\n      'Cobros Metálico',\n    ];\n\n    const rows = data.operations.map((op) => [\n      op.contactTaxId,\n      op.contactName,\n      this.formatAmount(op.totalAmount),\n      op.invoiceCount.toString(),\n      this.formatAmount(op.quarterBreakdown.Q1),\n      this.formatAmount(op.quarterBreakdown.Q2),\n      this.formatAmount(op.quarterBreakdown.Q3),\n      this.formatAmount(op.quarterBreakdown.Q4),\n      this.formatAmount(op.cashOperations),\n    ]);\n\n    const csv = [\n      headers.join(';'),\n      ...rows.map((row) => row.join(';')),\n      '', // Empty line\n      `TOTAL;${data.operationCount} operaciones;${this.formatAmount(data.totalDeclared)}€`,\n    ].join('\\n');\n\n    return csv;\n  }\n\n  /**\n   * Get fiscal quarter from date (Q1, Q2, Q3, Q4)\n   */\n  private getQuarter(date: Date): 'Q1' | 'Q2' | 'Q3' | 'Q4' {\n    const month = date.getMonth() + 1;\n    if (month <= 3) return 'Q1';\n    if (month <= 6) return 'Q2';\n    if (month <= 9) return 'Q3';\n    return 'Q4';\n  }\n\n  /**\n   * Format amount to string with 2 decimals (AEAT format)\n   */\n  private formatAmount(amount: Decimal): string {\n    return amount.toFixed(2);\n  }\n}\n"],"names":["Modelo347Service","calculateModelo347","companyId","fiscalYear","logger","log","company","prisma","findUniqueOrThrow","where","id","startDate","Date","endDate","invoices","invoice","findMany","issueDate","gte","lte","status","in","counterpartyCountry","include","contact","taxes","orderBy","length","operationsByContact","Map","contactKey","contactId","has","set","contactName","counterpartyName","contactTaxId","counterpartyTaxId","totalAmount","Decimal","invoiceCount","quarterBreakdown","Q1","Q2","Q3","Q4","cashOperations","realEstateOperations","operation","get","invoiceTotal","total","toString","plus","quarter","getQuarter","paymentMethod","cryptoPayment","greaterThan","operations","Array","from","values","filter","op","greaterThanOrEqualTo","THRESHOLD","totalDeclared","reduce","sum","declarantNif","taxId","declarantName","name","sort","a","b","lessThan","operationCount","generateXML","data","doc","create","version","encoding","ele","xmlns","txt","up","i","formatAmount","xml","end","prettyPrint","generateCSV","headers","rows","map","csv","join","row","date","month","getMonth","amount","toFixed","Logger"],"mappings":"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"}