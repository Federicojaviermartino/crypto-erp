{"version":3,"sources":["../../../src/modules/onboarding/onboarding.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Param,\n  UseGuards,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';\nimport { OnboardingService } from './onboarding.service.js';\nimport { JwtAuthGuard } from '../auth/guards/jwt-auth.guard.js';\nimport { GetUser } from '../auth/decorators/get-user.decorator.js';\nimport { User } from '@prisma/client';\n\n@ApiTags('onboarding')\n@ApiBearerAuth()\n@Controller('onboarding')\n@UseGuards(JwtAuthGuard)\nexport class OnboardingController {\n  constructor(private readonly onboarding: OnboardingService) {}\n\n  @Get('progress')\n  @ApiOperation({\n    summary: 'Get user onboarding progress',\n    description: 'Returns the current onboarding progress for the authenticated user',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Onboarding progress retrieved successfully',\n  })\n  async getProgress(@GetUser() user: User) {\n    return this.onboarding.getOnboardingProgress(user.id);\n  }\n\n  @Get('steps')\n  @ApiOperation({\n    summary: 'Get onboarding steps',\n    description: 'Returns all onboarding steps with completion status',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Onboarding steps retrieved successfully',\n  })\n  async getSteps(@GetUser() user: User) {\n    return this.onboarding.getOnboardingSteps(user.id);\n  }\n\n  @Post('steps/:stepId/complete')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({\n    summary: 'Mark onboarding step as completed',\n    description: 'Marks a specific onboarding step as completed',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Step marked as completed',\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Step not found',\n  })\n  async completeStep(@GetUser() user: User, @Param('stepId') stepId: string) {\n    return this.onboarding.completeStep(user.id, stepId);\n  }\n\n  @Post('steps/:stepId/skip')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({\n    summary: 'Skip onboarding step',\n    description: 'Marks a specific onboarding step as skipped',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Step marked as skipped',\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Step not found',\n  })\n  async skipStep(@GetUser() user: User, @Param('stepId') stepId: string) {\n    return this.onboarding.skipStep(user.id, stepId);\n  }\n\n  @Post('dismiss')\n  @HttpCode(HttpStatus.NO_CONTENT)\n  @ApiOperation({\n    summary: 'Dismiss onboarding',\n    description: 'Permanently dismisses the onboarding flow for the user',\n  })\n  @ApiResponse({\n    status: 204,\n    description: 'Onboarding dismissed',\n  })\n  async dismissOnboarding(@GetUser() user: User) {\n    await this.onboarding.dismissOnboarding(user.id);\n  }\n\n  @Post('restart')\n  @HttpCode(HttpStatus.OK)\n  @ApiOperation({\n    summary: 'Restart onboarding',\n    description: 'Resets onboarding progress to start from the beginning',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Onboarding restarted',\n  })\n  async restartOnboarding(@GetUser() user: User) {\n    return this.onboarding.restartOnboarding(user.id);\n  }\n\n  @Get('stats')\n  @ApiOperation({\n    summary: 'Get onboarding statistics',\n    description: 'Returns aggregated onboarding statistics (admin only)',\n  })\n  @ApiResponse({\n    status: 200,\n    description: 'Statistics retrieved successfully',\n  })\n  async getStats() {\n    return this.onboarding.getOnboardingStats();\n  }\n}\n"],"names":["OnboardingController","getProgress","user","onboarding","getOnboardingProgress","id","getSteps","getOnboardingSteps","completeStep","stepId","skipStep","dismissOnboarding","restartOnboarding","getStats","getOnboardingStats","summary","description","status","OK","NO_CONTENT"],"mappings":";;;;+BAmBaA;;;eAAAA;;;wBAXN;yBAC2D;mCAChC;8BACL;kCACL;wBACH;;;;;;;;;;;;;;;AAMd,IAAA,AAAMA,uBAAN,MAAMA;IAGX,MASMC,YAAY,AAAWC,IAAU,EAAE;QACvC,OAAO,IAAI,CAACC,UAAU,CAACC,qBAAqB,CAACF,KAAKG,EAAE;IACtD;IAEA,MASMC,SAAS,AAAWJ,IAAU,EAAE;QACpC,OAAO,IAAI,CAACC,UAAU,CAACI,kBAAkB,CAACL,KAAKG,EAAE;IACnD;IAEA,MAcMG,aAAa,AAAWN,IAAU,EAAE,AAAiBO,MAAc,EAAE;QACzE,OAAO,IAAI,CAACN,UAAU,CAACK,YAAY,CAACN,KAAKG,EAAE,EAAEI;IAC/C;IAEA,MAcMC,SAAS,AAAWR,IAAU,EAAE,AAAiBO,MAAc,EAAE;QACrE,OAAO,IAAI,CAACN,UAAU,CAACO,QAAQ,CAACR,KAAKG,EAAE,EAAEI;IAC3C;IAEA,MAUME,kBAAkB,AAAWT,IAAU,EAAE;QAC7C,MAAM,IAAI,CAACC,UAAU,CAACQ,iBAAiB,CAACT,KAAKG,EAAE;IACjD;IAEA,MAUMO,kBAAkB,AAAWV,IAAU,EAAE;QAC7C,OAAO,IAAI,CAACC,UAAU,CAACS,iBAAiB,CAACV,KAAKG,EAAE;IAClD;IAEA,MASMQ,WAAW;QACf,OAAO,IAAI,CAACV,UAAU,CAACW,kBAAkB;IAC3C;IAvGA,YAAY,AAAiBX,UAA6B,CAAE;aAA/BA,aAAAA;IAAgC;AAwG/D;;;;QApGIY,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;;QAQbD,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;6CAOME;;QAEnBH,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;;;6CAOME;;QAEnBH,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;;;6CAOMG;;QAEnBJ,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;6CAOME;;QAEnBH,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa;;;;;;;;;;;;QAQbD,SAAS;QACTC,aAAa;;;QAGbC,QAAQ;QACRD,aAAa"}