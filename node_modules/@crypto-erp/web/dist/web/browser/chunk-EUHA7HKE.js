import{a as O,c as W,e as I,l as N,m as F,n as B,r as R}from"./chunk-OE3B74VB.js";import{a as U}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{$a as P,Da as w,Gb as V,Ia as v,Ja as y,Ma as E,Na as T,Oa as t,Pa as n,Qa as L,Ra as M,Sa as p,Ta as d,U as S,Za as o,_a as f,aa as s,ba as m,bb as C,cb as _,db as g,fb as k,ra as c,sa as b,xa as h}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";var j=(l,u)=>u.id;function A(l,u){l&1&&(t(0,"div",13),L(1,"span",15),n())}function D(l,u){if(l&1){let i=M();t(0,"tr")(1,"td")(2,"strong"),o(3),n()(),t(4,"td"),o(5),n(),t(6,"td"),o(7),n(),t(8,"td"),o(9),n(),t(10,"td")(11,"span",17),o(12),n()(),t(13,"td")(14,"button",18),p("click",function(){let e=s(i).$implicit,a=d(2);return m(a.editContact(e))}),o(15,"Editar"),n()()()}if(l&2){let i=u.$implicit;c(3),f(i.name),c(2),f(i.taxId||"-"),c(2),f(i.email||"-"),c(2),f(i.phone||"-"),c(2),v(i.type==="CUSTOMER"?"badge-info":"badge-warning"),c(),P(" ",i.type==="CUSTOMER"?"Cliente":"Proveedor"," ")}}function z(l,u){l&1&&(t(0,"tr")(1,"td",19),o(2," No se encontraron contactos "),n()())}function G(l,u){if(l&1&&(t(0,"table",16)(1,"thead")(2,"tr")(3,"th"),o(4,"Nombre"),n(),t(5,"th"),o(6,"NIF/CIF"),n(),t(7,"th"),o(8,"Email"),n(),t(9,"th"),o(10,"Tel\xE9fono"),n(),t(11,"th"),o(12,"Tipo"),n(),t(13,"th"),o(14,"Acciones"),n()()(),t(15,"tbody"),E(16,D,16,7,"tr",null,j,!1,z,3,0,"tr"),n()()),l&2){let i=d();c(16),T(i.contacts())}}function q(l,u){if(l&1){let i=M();t(0,"div",20),p("click",function(){s(i);let e=d();return m(e.showModal=!1)}),t(1,"div",21),p("click",function(e){return s(i),m(e.stopPropagation())}),t(2,"div",22)(3,"h3"),o(4,"Nuevo Contacto"),n(),t(5,"button",23),p("click",function(){s(i);let e=d();return m(e.showModal=!1)}),o(6,"\xD7"),n()(),t(7,"div",24)(8,"div",25)(9,"label",26),o(10,"Nombre *"),n(),t(11,"input",27),g("ngModelChange",function(e){s(i);let a=d();return _(a.newContact.name,e)||(a.newContact.name=e),m(e)}),n()(),t(12,"div",28)(13,"div",25)(14,"label",26),o(15,"NIF/CIF"),n(),t(16,"input",27),g("ngModelChange",function(e){s(i);let a=d();return _(a.newContact.taxId,e)||(a.newContact.taxId=e),m(e)}),n()(),t(17,"div",25)(18,"label",26),o(19,"Tipo"),n(),t(20,"select",29),g("ngModelChange",function(e){s(i);let a=d();return _(a.newContact.type,e)||(a.newContact.type=e),m(e)}),t(21,"option",9),o(22,"Cliente"),n(),t(23,"option",10),o(24,"Proveedor"),n()()()(),t(25,"div",28)(26,"div",25)(27,"label",26),o(28,"Email"),n(),t(29,"input",30),g("ngModelChange",function(e){s(i);let a=d();return _(a.newContact.email,e)||(a.newContact.email=e),m(e)}),n()(),t(30,"div",25)(31,"label",26),o(32,"Tel\xE9fono"),n(),t(33,"input",27),g("ngModelChange",function(e){s(i);let a=d();return _(a.newContact.phone,e)||(a.newContact.phone=e),m(e)}),n()()()(),t(34,"div",31)(35,"button",32),p("click",function(){s(i);let e=d();return m(e.showModal=!1)}),o(36,"Cancelar"),n(),t(37,"button",3),p("click",function(){s(i);let e=d();return m(e.createContact())}),o(38,"Crear"),n()()()()}if(l&2){let i=d();c(11),C("ngModel",i.newContact.name),c(5),C("ngModel",i.newContact.taxId),c(4),C("ngModel",i.newContact.type),c(9),C("ngModel",i.newContact.email),c(4),C("ngModel",i.newContact.phone)}}var $=(()=>{class l{api;contacts=h([]);loading=h(!0);searchTerm="";filterType="";showModal=!1;newContact={name:"",taxId:"",email:"",phone:"",type:"CUSTOMER"};constructor(i){this.api=i}ngOnInit(){this.loadContacts()}loadContacts(){this.loading.set(!0);let i={};this.searchTerm&&(i.search=this.searchTerm),this.filterType&&(i.type=this.filterType),this.api.get("/contacts",i).subscribe({next:r=>{this.contacts.set(r.contacts||[]),this.loading.set(!1)},error:()=>this.loading.set(!1)})}onSearch(){setTimeout(()=>this.loadContacts(),300)}editContact(i){console.log("Edit:",i)}createContact(){this.api.post("/contacts",this.newContact).subscribe({next:()=>{this.showModal=!1,this.newContact={name:"",taxId:"",email:"",phone:"",type:"CUSTOMER"},this.loadContacts()}})}static \u0275fac=function(r){return new(r||l)(b(U))};static \u0275cmp=S({type:l,selectors:[["app-contacts-list"]],standalone:!0,features:[k],decls:24,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"filters","card"],[1,"card-body","d-flex","gap-md"],["type","text","placeholder","Buscar...",1,"form-input",2,"max-width","250px",3,"ngModelChange","ngModel"],[1,"form-select",2,"max-width","150px",3,"ngModelChange","ngModel"],["value",""],["value","CUSTOMER"],["value","SUPPLIER"],[1,"card"],[1,"card-body",2,"padding","0"],[1,"text-center","p-lg"],[1,"modal-backdrop"],[1,"spinner"],[1,"table"],[1,"badge"],[1,"btn","btn-sm","btn-secondary",3,"click"],["colspan","6",1,"text-center","text-muted","p-lg"],[1,"modal-backdrop",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],["type","text",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],[1,"form-select",3,"ngModelChange","ngModel"],["type","email",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),o(4,"Contactos"),n(),t(5,"p",2),o(6,"Gestiona clientes y proveedores"),n()(),t(7,"button",3),p("click",function(){return e.showModal=!0}),o(8," + Nuevo Contacto "),n()(),t(9,"div",4)(10,"div",5)(11,"input",6),g("ngModelChange",function(x){return _(e.searchTerm,x)||(e.searchTerm=x),x}),p("ngModelChange",function(){return e.onSearch()}),n(),t(12,"select",7),g("ngModelChange",function(x){return _(e.filterType,x)||(e.filterType=x),x}),p("ngModelChange",function(){return e.loadContacts()}),t(13,"option",8),o(14,"Todos"),n(),t(15,"option",9),o(16,"Clientes"),n(),t(17,"option",10),o(18,"Proveedores"),n()()()(),t(19,"div",11)(20,"div",12),w(21,A,2,0,"div",13)(22,G,19,1),n()(),w(23,q,39,5,"div",14),n()),r&2&&(c(11),C("ngModel",e.searchTerm),c(),C("ngModel",e.filterType),c(9),y(21,e.loading()?21:22),c(2),y(23,e.showModal?23:-1))},dependencies:[V,R,F,B,O,N,W,I],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-lg)}.filters[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.form-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md)}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:var(--white);border-radius:var(--radius-lg);width:100%;max-width:500px;box-shadow:var(--shadow-lg)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-lg);border-bottom:1px solid var(--gray-200)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--gray-500)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--spacing-md);padding:var(--spacing-lg);border-top:1px solid var(--gray-200)}"]})}return l})();export{$ as ContactsListComponent};
