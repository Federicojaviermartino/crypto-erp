{"version":3,"sources":["../../../src/common/dto/pagination.dto.ts"],"sourcesContent":["import { Type } from 'class-transformer';\nimport { IsInt, IsOptional, Min, Max } from 'class-validator';\nimport { ApiPropertyOptional } from '@nestjs/swagger';\n\n/**\n * Base pagination query DTO\n */\nexport class PaginationDto {\n  @ApiPropertyOptional({ default: 1, minimum: 1 })\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  page?: number = 1;\n\n  @ApiPropertyOptional({ default: 20, minimum: 1, maximum: 100 })\n  @IsOptional()\n  @Type(() => Number)\n  @IsInt()\n  @Min(1)\n  @Max(100)\n  limit?: number = 20;\n\n  get skip(): number {\n    return ((this.page ?? 1) - 1) * (this.limit ?? 20);\n  }\n\n  get take(): number {\n    return this.limit ?? 20;\n  }\n}\n\n/**\n * Paginated response wrapper\n */\nexport interface PaginatedResponse<T> {\n  items: T[];\n  meta: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n    hasNext: boolean;\n    hasPrev: boolean;\n  };\n}\n\n/**\n * Helper to create paginated response\n */\nexport function paginate<T>(\n  items: T[],\n  total: number,\n  pagination: PaginationDto,\n): PaginatedResponse<T> {\n  const page = pagination.page ?? 1;\n  const limit = pagination.limit ?? 20;\n  const totalPages = Math.ceil(total / limit);\n\n  return {\n    items,\n    meta: {\n      page,\n      limit,\n      total,\n      totalPages,\n      hasNext: page < totalPages,\n      hasPrev: page > 1,\n    },\n  };\n}\n"],"names":["PaginationDto","paginate","skip","page","limit","take","default","minimum","Number","maximum","items","total","pagination","totalPages","Math","ceil","meta","hasNext","hasPrev"],"mappings":";;;;;;;;;;;QAOaA;eAAAA;;QA2CGC;eAAAA;;;kCAlDK;gCACuB;yBACR;;;;;;;;;;AAK7B,IAAA,AAAMD,gBAAN,MAAMA;IAgBX,IAAIE,OAAe;QACjB,OAAO,AAAC,CAAA,AAAC,CAAA,IAAI,CAACC,IAAI,IAAI,CAAA,IAAK,CAAA,IAAM,CAAA,IAAI,CAACC,KAAK,IAAI,EAAC;IAClD;IAEA,IAAIC,OAAe;QACjB,OAAO,IAAI,CAACD,KAAK,IAAI;IACvB;;aAhBAD,OAAgB;aAQhBC,QAAiB;;AASnB;;;QAtByBE,SAAS;QAAGC,SAAS;;;oCAEhCC;;;;;;;QAKWF,SAAS;QAAIC,SAAS;QAAGE,SAAS;;;oCAE7CD;;;;;;AAiCP,SAASP,SACdS,KAAU,EACVC,KAAa,EACbC,UAAyB;IAEzB,MAAMT,OAAOS,WAAWT,IAAI,IAAI;IAChC,MAAMC,QAAQQ,WAAWR,KAAK,IAAI;IAClC,MAAMS,aAAaC,KAAKC,IAAI,CAACJ,QAAQP;IAErC,OAAO;QACLM;QACAM,MAAM;YACJb;YACAC;YACAO;YACAE;YACAI,SAASd,OAAOU;YAChBK,SAASf,OAAO;QAClB;IACF;AACF"}