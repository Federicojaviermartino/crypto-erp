{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core';\nimport { Logger } from '@nestjs/common';\nimport { WorkerModule } from './worker.module.js';\n\nasync function bootstrap() {\n  const logger = new Logger('Worker');\n  \n  const app = await NestFactory.createApplicationContext(WorkerModule, {\n    logger: ['error', 'warn', 'log', 'debug', 'verbose'],\n  });\n\n  logger.log('='.repeat(60));\n  logger.log('ðŸš€ Crypto ERP Worker Started');\n  logger.log('='.repeat(60));\n  logger.log('');\n  logger.log('Active Processors:');\n  logger.log('  ðŸ“¦ BlockchainSyncProcessor - Sync wallets every 15 min');\n  logger.log('  ðŸ’° PriceUpdateProcessor    - Update prices every 5 min');\n  logger.log('  ðŸ“„ VerifactuSendProcessor  - Submit invoices to AEAT');\n  logger.log('  ðŸ“ JournalEntryProcessor   - Auto-create journal entries');\n  logger.log('');\n  logger.log('Redis:', process.env.REDIS_HOST || 'localhost');\n  logger.log('Environment:', process.env.NODE_ENV || 'development');\n  logger.log('='.repeat(60));\n\n  // Enable graceful shutdown\n  process.on('SIGTERM', async () => {\n    logger.log('Received SIGTERM signal. Shutting down gracefully...');\n    await app.close();\n    process.exit(0);\n  });\n\n  process.on('SIGINT', async () => {\n    logger.log('Received SIGINT signal. Shutting down gracefully...');\n    await app.close();\n    process.exit(0);\n  });\n}\n\nbootstrap().catch((error) => {\n  console.error('Failed to start worker:', error);\n  process.exit(1);\n});\n"],"names":["bootstrap","logger","Logger","app","NestFactory","createApplicationContext","WorkerModule","log","repeat","process","env","REDIS_HOST","NODE_ENV","on","close","exit","catch","error","console"],"mappings":";;;;sBAA4B;wBACL;8BACM;AAE7B,eAAeA;IACb,MAAMC,SAAS,IAAIC,cAAM,CAAC;IAE1B,MAAMC,MAAM,MAAMC,iBAAW,CAACC,wBAAwB,CAACC,0BAAY,EAAE;QACnEL,QAAQ;YAAC;YAAS;YAAQ;YAAO;YAAS;SAAU;IACtD;IAEAA,OAAOM,GAAG,CAAC,IAAIC,MAAM,CAAC;IACtBP,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC,IAAIC,MAAM,CAAC;IACtBP,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC;IACXN,OAAOM,GAAG,CAAC,UAAUE,QAAQC,GAAG,CAACC,UAAU,IAAI;IAC/CV,OAAOM,GAAG,CAAC,gBAAgBE,QAAQC,GAAG,CAACE,QAAQ,IAAI;IACnDX,OAAOM,GAAG,CAAC,IAAIC,MAAM,CAAC;IAEtB,2BAA2B;IAC3BC,QAAQI,EAAE,CAAC,WAAW;QACpBZ,OAAOM,GAAG,CAAC;QACX,MAAMJ,IAAIW,KAAK;QACfL,QAAQM,IAAI,CAAC;IACf;IAEAN,QAAQI,EAAE,CAAC,UAAU;QACnBZ,OAAOM,GAAG,CAAC;QACX,MAAMJ,IAAIW,KAAK;QACfL,QAAQM,IAAI,CAAC;IACf;AACF;AAEAf,YAAYgB,KAAK,CAAC,CAACC;IACjBC,QAAQD,KAAK,CAAC,2BAA2BA;IACzCR,QAAQM,IAAI,CAAC;AACf"}