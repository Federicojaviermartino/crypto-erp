import{a as E}from"./chunk-TRXNC6YO.js";import{c as y,d as F}from"./chunk-R5763NNK.js";import{a as M,b as s,c as P,d as w,f as I,h as O,k as L,q as N,s as T}from"./chunk-OE3B74VB.js";import"./chunk-FXBJWTCM.js";import{$a as _,Da as d,Fa as v,Gb as S,Ha as f,Ja as m,Oa as t,Pa as i,Qa as p,Sa as C,Ta as b,U as h,Za as n,fb as x,ra as o,sa as c,xa as g}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";function k(e,u){if(e&1&&(t(0,"div",3),n(1),i()),e&2){let l=b();o(),_(" ",l.error()," ")}}function D(e,u){e&1&&(t(0,"div",8),n(1,"Email es requerido"),i())}function R(e,u){e&1&&(t(0,"div",8),n(1,"Contrase\xF1a es requerida"),i())}function j(e,u){e&1&&(p(0,"span",14),n(1," Iniciando sesi\xF3n... "))}function q(e,u){e&1&&n(0," Iniciar sesi\xF3n ")}var W=(()=>{class e{fb;authService;router;form;loading=g(!1);error=g(null);constructor(l,a,r){this.fb=l,this.authService=a,this.router=r,this.form=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]]})}isFieldInvalid(l){let a=this.form.get(l);return!!(a&&a.invalid&&a.touched)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading.set(!0),this.error.set(null),this.authService.login(this.form.value).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:l=>{this.loading.set(!1),this.error.set(l.error?.message||"Error al iniciar sesi\xF3n")}})}static \u0275fac=function(a){return new(a||e)(c(N),c(E),c(y))};static \u0275cmp=h({type:e,selectors:[["app-login"]],standalone:!0,features:[x],decls:27,vars:10,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"alert","alert-danger"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","tu@email.com",1,"form-input"],[1,"form-error"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"auth-footer"],["routerLink","/auth/register"],[1,"spinner"]],template:function(a,r){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),n(4,"Crypto ERP"),i(),t(5,"p"),n(6,"Inicia sesi\xF3n en tu cuenta"),i()(),d(7,k,2,1,"div",3),t(8,"form",4),C("ngSubmit",function(){return r.onSubmit()}),t(9,"div",5)(10,"label",6),n(11,"Email"),i(),p(12,"input",7),d(13,D,2,0,"div",8),i(),t(14,"div",5)(15,"label",9),n(16,"Contrase\xF1a"),i(),p(17,"input",10),d(18,R,2,0,"div",8),i(),t(19,"button",11),d(20,j,2,0)(21,q,1,0),i()(),t(22,"div",12)(23,"p"),n(24,"\xBFNo tienes una cuenta? "),t(25,"a",13),n(26,"Reg\xEDstrate"),i()()()()()),a&2&&(o(7),m(7,r.error()?7:-1),o(),v("formGroup",r.form),o(4),f("is-invalid",r.isFieldInvalid("email")),o(),m(13,r.isFieldInvalid("email")?13:-1),o(4),f("is-invalid",r.isFieldInvalid("password")),o(),m(18,r.isFieldInvalid("password")?18:-1),o(),v("disabled",r.loading()),o(),m(20,r.loading()?20:21))},dependencies:[S,T,I,M,P,w,O,L,F],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:var(--spacing-lg);background:linear-gradient(135deg,var(--gray-100) 0%,var(--gray-200) 100%)}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:var(--white);border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);padding:var(--spacing-2xl)}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary);margin-bottom:var(--spacing-sm)}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-500)}.alert[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--radius-md);margin-bottom:var(--spacing-md)}.alert-danger[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b;border:1px solid #fecaca}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-lg);padding-top:var(--spacing-lg);border-top:1px solid var(--gray-200)}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--gray-500);margin:0}"]})}return e})();export{W as LoginComponent};
