{"version":3,"sources":["../../../src/modules/webhooks/webhook-events.helper.ts"],"sourcesContent":["/**\n * Webhook Event Types\n * All available webhook events in the system\n */\nexport enum WebhookEventType {\n  // Invoice events\n  INVOICE_CREATED = 'invoice.created',\n  INVOICE_UPDATED = 'invoice.updated',\n  INVOICE_DELETED = 'invoice.deleted',\n  INVOICE_SENT = 'invoice.sent',\n  INVOICE_PAID = 'invoice.paid',\n\n  // Crypto transaction events\n  CRYPTO_TX_CREATED = 'crypto_transaction.created',\n  CRYPTO_TX_UPDATED = 'crypto_transaction.updated',\n  \n  // Wallet events\n  WALLET_CONNECTED = 'wallet.connected',\n  WALLET_SYNCED = 'wallet.synced',\n\n  // Verifactu events\n  VERIFACTU_SUBMITTED = 'verifactu.submitted',\n  VERIFACTU_CONFIRMED = 'verifactu.confirmed',\n  VERIFACTU_FAILED = 'verifactu.failed',\n\n  // User events\n  USER_REGISTERED = 'user.registered',\n  USER_INVITED = 'user.invited',\n\n  // Subscription events\n  SUBSCRIPTION_UPDATED = 'subscription.updated',\n  SUBSCRIPTION_CANCELLED = 'subscription.cancelled',\n\n  // Test event\n  WEBHOOK_TEST = 'webhook.test',\n}\n\n/**\n * Helper to emit webhook events from any service\n * \n * Usage:\n * constructor(private readonly webhooks: WebhooksService) {}\n * \n * await emitWebhookEvent(\n *   this.webhooks,\n *   companyId,\n *   WebhookEventType.INVOICE_CREATED,\n *   'Invoice',\n *   invoice.id,\n *   invoice\n * );\n */\nexport async function emitWebhookEvent(\n  webhooksService: any,\n  companyId: string,\n  event: WebhookEventType,\n  entityType: string,\n  entityId: string,\n  payload: any,\n) {\n  try {\n    await webhooksService.emitEvent(companyId, {\n      event,\n      entityType,\n      entityId,\n      payload,\n    });\n  } catch (error) {\n    // Log but don't fail if webhook emission fails\n    console.error(`Failed to emit webhook event ${event}:`, error.message);\n  }\n}\n"],"names":["WebhookEventType","emitWebhookEvent","webhooksService","companyId","event","entityType","entityId","payload","emitEvent","error","console","message"],"mappings":"AAAA;;;CAGC;;;;;;;;;;;QACWA;eAAAA;;QAgDUC;eAAAA;;;AAhDf,IAAA,AAAKD,0CAAAA;IACV,iBAAiB;;;;;;IAOjB,4BAA4B;;;IAI5B,gBAAgB;;;IAIhB,mBAAmB;;;;IAKnB,cAAc;;;IAId,sBAAsB;;;IAItB,aAAa;;WA7BHA;;AAgDL,eAAeC,iBACpBC,eAAoB,EACpBC,SAAiB,EACjBC,KAAuB,EACvBC,UAAkB,EAClBC,QAAgB,EAChBC,OAAY;IAEZ,IAAI;QACF,MAAML,gBAAgBM,SAAS,CAACL,WAAW;YACzCC;YACAC;YACAC;YACAC;QACF;IACF,EAAE,OAAOE,OAAO;QACd,+CAA+C;QAC/CC,QAAQD,KAAK,CAAC,CAAC,6BAA6B,EAAEL,MAAM,CAAC,CAAC,EAAEK,MAAME,OAAO;IACvE;AACF"}