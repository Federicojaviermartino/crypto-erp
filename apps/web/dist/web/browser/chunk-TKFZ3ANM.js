import{a as j,c as G,e as z,r as q}from"./chunk-OE3B74VB.js";import{a as H}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{$a as V,Da as g,Eb as W,Fa as k,Fb as N,Gb as L,Ha as x,Ja as C,Ma as S,Na as D,Oa as e,Pa as t,Qa as T,Ra as E,Sa as v,Ta as m,U as I,Za as i,_a as d,aa as f,ba as b,bb as R,cb as y,db as w,fb as F,hb as c,ib as A,jb as _,ra as o,sa as B,xa as h}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";var M=(a,p)=>p.accountId;function Y(a,p){if(a&1){let n=E();e(0,"div",11)(1,"label",12),i(2,"Desde"),t(),e(3,"input",13),w("ngModelChange",function(r){f(n);let s=m(2);return y(s.startDate,r)||(s.startDate=r),b(r)}),t()(),e(4,"div",11)(5,"label",12),i(6,"Hasta"),t(),e(7,"input",13),w("ngModelChange",function(r){f(n);let s=m(2);return y(s.endDate,r)||(s.endDate=r),b(r)}),t()()}if(a&2){let n=m(2);o(3),R("ngModel",n.startDate),o(4),R("ngModel",n.endDate)}}function J(a,p){if(a&1){let n=E();e(0,"div",11)(1,"label",12),i(2,"A fecha de"),t(),e(3,"input",13),w("ngModelChange",function(r){f(n);let s=m(2);return y(s.asOfDate,r)||(s.asOfDate=r),b(r)}),t()()}if(a&2){let n=m(2);o(3),R("ngModel",n.asOfDate)}}function K(a,p){a&1&&T(0,"span",9)}function Q(a,p){a&1&&i(0," Generar Informe ")}function U(a,p){if(a&1&&(e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td",18),i(6),c(7,"number"),t(),e(8,"td",18),i(9),c(10,"number"),t(),e(11,"td",18),i(12),c(13,"number"),t()()),a&2){let n=p.$implicit;o(2),d(n.accountCode),o(2),d(n.accountName),o(2),d(_(7,7,n.debit,"1.2-2")),o(3),d(_(10,10,n.credit,"1.2-2")),o(2),x("text-danger",n.balance<0),o(),V(" ",_(13,13,n.balance,"1.2-2")," ")}}function X(a,p){if(a&1&&(e(0,"table",17)(1,"thead")(2,"tr")(3,"th"),i(4,"C\xF3digo"),t(),e(5,"th"),i(6,"Cuenta"),t(),e(7,"th",18),i(8,"Debe"),t(),e(9,"th",18),i(10,"Haber"),t(),e(11,"th",18),i(12,"Saldo"),t()()(),e(13,"tbody"),S(14,U,14,16,"tr",null,M),t(),e(16,"tfoot")(17,"tr")(18,"td",19)(19,"strong"),i(20,"TOTALES"),t()(),e(21,"td",18)(22,"strong"),i(23),c(24,"number"),t()(),e(25,"td",18)(26,"strong"),i(27),c(28,"number"),t()(),T(29,"td"),t()()()),a&2){let n,l,r=m(3);o(14),D(r.reportData().accounts),o(9),d(_(24,2,(n=r.reportData().totals)==null?null:n.totalDebits,"1.2-2")),o(4),d(_(28,5,(l=r.reportData().totals)==null?null:l.totalCredits,"1.2-2"))}}function Z(a,p){if(a&1&&(e(0,"div",21)(1,"span"),i(2),t(),e(3,"span"),i(4),c(5,"number"),t()()),a&2){let n=p.$implicit;o(2),d(n.accountName),o(2),d(_(5,2,n.balance,"1.2-2"))}}function $(a,p){if(a&1&&(e(0,"div",21)(1,"span"),i(2),t(),e(3,"span"),i(4),c(5,"number"),t()()),a&2){let n=p.$implicit;o(2),d(n.accountName),o(2),d(_(5,2,n.balance,"1.2-2"))}}function ee(a,p){if(a&1&&(e(0,"div",21)(1,"span"),i(2),t(),e(3,"span"),i(4),c(5,"number"),t()()),a&2){let n=p.$implicit;o(2),d(n.accountName),o(2),d(_(5,2,n.balance,"1.2-2"))}}function te(a,p){if(a&1&&(e(0,"div",20)(1,"div")(2,"h4"),i(3,"ACTIVO"),t(),S(4,Z,6,5,"div",21,M),e(6,"div",22)(7,"span"),i(8,"Total Activo"),t(),e(9,"span"),i(10),c(11,"number"),t()()(),e(12,"div")(13,"h4"),i(14,"PASIVO"),t(),S(15,$,6,5,"div",21,M),e(17,"div",22)(18,"span"),i(19,"Total Pasivo"),t(),e(20,"span"),i(21),c(22,"number"),t()(),e(23,"h4",23),i(24,"PATRIMONIO"),t(),S(25,ee,6,5,"div",21,M),e(27,"div",22)(28,"span"),i(29,"Total Patrimonio"),t(),e(30,"span"),i(31),c(32,"number"),t()()()()),a&2){let n,l,r,s,P,O,u=m(3);o(4),D((n=u.reportData().assets)==null?null:n.accounts),o(6),d(_(11,3,(l=u.reportData().assets)==null?null:l.total,"1.2-2")),o(5),D((r=u.reportData().liabilities)==null?null:r.accounts),o(6),d(_(22,6,(s=u.reportData().liabilities)==null?null:s.total,"1.2-2")),o(4),D((P=u.reportData().equity)==null?null:P.accounts),o(6),d(_(32,9,(O=u.reportData().equity)==null?null:O.total,"1.2-2"))}}function ne(a,p){if(a&1&&(e(0,"pre"),i(1),c(2,"json"),t()),a&2){let n=m(3);o(),d(A(2,1,n.reportData()))}}function ie(a,p){if(a&1&&(e(0,"div",10)(1,"div",14)(2,"h3"),i(3),t(),e(4,"button",15),i(5,"Exportar PDF"),t()(),e(6,"div",16),g(7,X,30,8)(8,te,33,12)(9,ne,3,3),t()()),a&2){let n,l=m(2);o(3),d(l.getReportTitle()),o(4),C(7,(n=l.selectedReport())==="trial-balance"?7:n==="balance-sheet"?8:9)}}function ae(a,p){if(a&1){let n=E();e(0,"div",6)(1,"div",7),g(2,Y,8,2)(3,J,4,1),e(4,"button",8),v("click",function(){f(n);let r=m();return b(r.generateReport())}),g(5,K,1,0,"span",9)(6,Q,1,0),t()()(),g(7,ie,10,2,"div",10)}if(a&2){let n=m();o(2),C(2,n.selectedReport()!=="balance-sheet"?2:3),o(2),k("disabled",n.loading()),o(),C(5,n.loading()?5:6),o(2),C(7,n.reportData()?7:-1)}}var _e=(()=>{class a{api;selectedReport=h(null);reportData=h(null);loading=h(!1);startDate=new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0];endDate=new Date().toISOString().split("T")[0];asOfDate=new Date().toISOString().split("T")[0];constructor(n){this.api=n}selectReport(n){this.selectedReport.set(n),this.reportData.set(null)}getReportTitle(){return{"trial-balance":"Balance de Comprobaci\xF3n","balance-sheet":"Balance General","income-statement":"Cuenta de Resultados","general-ledger":"Libro Mayor"}[this.selectedReport()||""]||""}generateReport(){let n=this.selectedReport();if(!n)return;this.loading.set(!0);let l={},r="";switch(n){case"trial-balance":r="/reports/trial-balance",l={startDate:this.startDate,endDate:this.endDate};break;case"balance-sheet":r="/reports/balance-sheet",l={asOfDate:this.asOfDate};break;case"income-statement":r="/reports/income-statement",l={startDate:this.startDate,endDate:this.endDate};break}this.api.get(r,l).subscribe({next:s=>{this.reportData.set(s),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static \u0275fac=function(l){return new(l||a)(B(H))};static \u0275cmp=I({type:a,selectors:[["app-reports"]],standalone:!0,features:[F],decls:36,vars:9,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],[1,"reports-grid"],[1,"report-card",3,"click"],[1,"report-icon"],[1,"card","mb-lg"],[1,"card-body","d-flex","gap-md","align-center"],[1,"btn","btn-primary",2,"margin-top","24px",3,"click","disabled"],[1,"spinner"],[1,"card"],[1,"form-group","mb-0"],[1,"form-label"],["type","date",1,"form-input",3,"ngModelChange","ngModel"],[1,"card-header","d-flex","justify-between","align-center"],[1,"btn","btn-sm","btn-secondary"],[1,"card-body"],[1,"table"],[1,"text-right"],["colspan","2"],[1,"balance-sheet-grid"],[1,"bs-row"],[1,"bs-total"],[1,"mt-lg"]],template:function(l,r){l&1&&(e(0,"div",0)(1,"header",1)(2,"h1"),i(3,"Informes Contables"),t(),e(4,"p",2),i(5,"Genera informes financieros"),t()(),e(6,"div",3)(7,"div",4),v("click",function(){return r.selectReport("trial-balance")}),e(8,"span",5),i(9,"\u{1F4CA}"),t(),e(10,"h3"),i(11,"Balance de Comprobaci\xF3n"),t(),e(12,"p"),i(13,"Sumas y saldos de todas las cuentas"),t()(),e(14,"div",4),v("click",function(){return r.selectReport("balance-sheet")}),e(15,"span",5),i(16,"\u{1F4CB}"),t(),e(17,"h3"),i(18,"Balance General"),t(),e(19,"p"),i(20,"Activos, pasivos y patrimonio"),t()(),e(21,"div",4),v("click",function(){return r.selectReport("income-statement")}),e(22,"span",5),i(23,"\u{1F4C8}"),t(),e(24,"h3"),i(25,"Cuenta de Resultados"),t(),e(26,"p"),i(27,"Ingresos, gastos y beneficio"),t()(),e(28,"div",4),v("click",function(){return r.selectReport("general-ledger")}),e(29,"span",5),i(30,"\u{1F4D2}"),t(),e(31,"h3"),i(32,"Libro Mayor"),t(),e(33,"p"),i(34,"Movimientos por cuenta"),t()()(),g(35,ae,8,4),t()),l&2&&(o(7),x("active",r.selectedReport()==="trial-balance"),o(7),x("active",r.selectedReport()==="balance-sheet"),o(7),x("active",r.selectedReport()==="income-statement"),o(7),x("active",r.selectedReport()==="general-ledger"),o(7),C(35,r.selectedReport()?35:-1))},dependencies:[L,W,N,q,j,G,z],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-xs) 0 0}.reports-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:var(--spacing-md);margin-bottom:var(--spacing-xl)}.report-card[_ngcontent-%COMP%]{padding:var(--spacing-lg);background:var(--white);border:2px solid var(--gray-200);border-radius:var(--radius-lg);cursor:pointer;transition:all var(--transition-fast)}.report-card[_ngcontent-%COMP%]:hover{border-color:var(--primary-light);transform:translateY(-2px)}.report-card.active[_ngcontent-%COMP%]{border-color:var(--primary);background:#eff6ff}.report-card[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:2rem;display:block;margin-bottom:var(--spacing-sm)}.report-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xs);font-size:1rem}.report-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--gray-500)}.balance-sheet-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-xl)}.bs-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:var(--spacing-sm) 0;border-bottom:1px solid var(--gray-100)}.bs-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:var(--spacing-md) 0;font-weight:600;border-top:2px solid var(--gray-300);margin-top:var(--spacing-sm)}"]})}return a})();export{_e as ReportsComponent};
