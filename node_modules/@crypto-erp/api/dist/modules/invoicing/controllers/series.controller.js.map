{"version":3,"sources":["../../../../src/modules/invoicing/controllers/series.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  UseGuards,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n  ApiParam,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard, TenantGuard } from '../../../common/guards/index.js';\nimport { CurrentCompany } from '../../../common/decorators/index.js';\nimport { SeriesService } from '../services/index.js';\nimport { CreateSeriesDto } from '../dto/index.js';\n\n@ApiTags('Invoice Series')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard, TenantGuard)\n@Controller('invoice-series')\nexport class SeriesController {\n  constructor(private readonly seriesService: SeriesService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'List all invoice series' })\n  @ApiResponse({ status: 200, description: 'Returns list of invoice series' })\n  async findAll(@CurrentCompany() companyId: string) {\n    return this.seriesService.findAll(companyId);\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get invoice series by ID' })\n  @ApiParam({ name: 'id', description: 'Series ID' })\n  @ApiResponse({ status: 200, description: 'Returns series details' })\n  @ApiResponse({ status: 404, description: 'Series not found' })\n  async findById(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.seriesService.findById(companyId, id);\n  }\n\n  @Get(':id/stats')\n  @ApiOperation({ summary: 'Get invoice series statistics' })\n  @ApiParam({ name: 'id', description: 'Series ID' })\n  @ApiResponse({ status: 200, description: 'Returns series statistics' })\n  async getStats(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.seriesService.getStats(companyId, id);\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new invoice series' })\n  @ApiResponse({ status: 201, description: 'Series created successfully' })\n  @ApiResponse({ status: 409, description: 'Series with prefix already exists' })\n  async create(\n    @CurrentCompany() companyId: string,\n    @Body() dto: CreateSeriesDto,\n  ) {\n    return this.seriesService.create(companyId, dto);\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update an invoice series' })\n  @ApiParam({ name: 'id', description: 'Series ID' })\n  @ApiResponse({ status: 200, description: 'Series updated successfully' })\n  @ApiResponse({ status: 404, description: 'Series not found' })\n  async update(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n    @Body() dto: Partial<CreateSeriesDto>,\n  ) {\n    return this.seriesService.update(companyId, id, dto);\n  }\n\n  @Delete(':id')\n  @ApiOperation({ summary: 'Delete an invoice series' })\n  @ApiParam({ name: 'id', description: 'Series ID' })\n  @ApiResponse({ status: 204, description: 'Series deleted successfully' })\n  @ApiResponse({ status: 409, description: 'Cannot delete series with invoices' })\n  @HttpCode(HttpStatus.NO_CONTENT)\n  async delete(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    await this.seriesService.delete(companyId, id);\n  }\n}\n"],"names":["SeriesController","findAll","companyId","seriesService","findById","id","getStats","create","dto","update","delete","summary","status","description","name","NO_CONTENT"],"mappings":";;;;+BA4BaA;;;eAAAA;;;wBAjBN;yBAOA;uBACmC;wBACX;wBACD;wBACE;;;;;;;;;;;;;;;AAMzB,IAAA,AAAMA,mBAAN,MAAMA;IAGX,MAGMC,QAAQ,AAAkBC,SAAiB,EAAE;QACjD,OAAO,IAAI,CAACC,aAAa,CAACF,OAAO,CAACC;IACpC;IAEA,MAKME,SACJ,AAAkBF,SAAiB,EACnC,AAAaG,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,aAAa,CAACC,QAAQ,CAACF,WAAWG;IAChD;IAEA,MAIMC,SACJ,AAAkBJ,SAAiB,EACnC,AAAaG,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,aAAa,CAACG,QAAQ,CAACJ,WAAWG;IAChD;IAEA,MAIME,OACJ,AAAkBL,SAAiB,EACnC,AAAQM,GAAoB,EAC5B;QACA,OAAO,IAAI,CAACL,aAAa,CAACI,MAAM,CAACL,WAAWM;IAC9C;IAEA,MAKMC,OACJ,AAAkBP,SAAiB,EACnC,AAAaG,EAAU,EACvB,AAAQG,GAA6B,EACrC;QACA,OAAO,IAAI,CAACL,aAAa,CAACM,MAAM,CAACP,WAAWG,IAAIG;IAClD;IAEA,MAMME,OACJ,AAAkBR,SAAiB,EACnC,AAAaG,EAAU,EACvB;QACA,MAAM,IAAI,CAACF,aAAa,CAACO,MAAM,CAACR,WAAWG;IAC7C;IAnEA,YAAY,AAAiBF,aAA4B,CAAE;aAA9BA,gBAAAA;IAA+B;AAoE9D;;;;QAjEkBQ,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAMzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAUzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;6CACpBE"}