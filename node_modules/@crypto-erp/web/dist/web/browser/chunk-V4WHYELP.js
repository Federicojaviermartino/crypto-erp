import{a as F,b as C,c as N,d as M,f as w,h as T,k as P,q as D,s as I}from"./chunk-OE3B74VB.js";import{a as O}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{Da as p,Fa as g,Gb as E,Ja as s,Oa as t,Pa as e,Qa as a,Ra as _,Sa as S,Ta as c,U as v,Za as n,_a as h,aa as x,ba as b,fb as y,ra as l,sa as f,xa as m}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";function V(o,d){o&1&&(t(0,"div",3),a(1,"span",4),e())}function G(o,d){o&1&&(t(0,"div",22),n(1,"Cambios guardados correctamente"),e())}function A(o,d){if(o&1&&(t(0,"div",23),n(1),e()),o&2){let i=c(2);l(),h(i.error())}}function k(o,d){o&1&&a(0,"span",4)}function j(o,d){if(o&1){let i=_();t(0,"form",5),S("ngSubmit",function(){x(i);let u=c();return b(u.onSubmit())}),t(1,"div",6)(2,"div",7)(3,"h3"),n(4,"Datos Fiscales"),e()(),t(5,"div",8)(6,"div",9)(7,"div",10)(8,"label",11),n(9,"Raz\xF3n Social *"),e(),a(10,"input",12),e(),t(11,"div",13)(12,"label",11),n(13,"NIF/CIF *"),e(),a(14,"input",14),e()(),t(15,"div",13)(16,"label",11),n(17,"Direcci\xF3n"),e(),a(18,"input",15),e(),t(19,"div",9)(20,"div",13)(21,"label",11),n(22,"Ciudad"),e(),a(23,"input",16),e(),t(24,"div",13)(25,"label",11),n(26,"C\xF3digo Postal"),e(),a(27,"input",17),e(),t(28,"div",13)(29,"label",11),n(30,"Pa\xEDs"),e(),a(31,"input",18),e()()()(),t(32,"div",6)(33,"div",7)(34,"h3"),n(35,"Contacto"),e()(),t(36,"div",8)(37,"div",9)(38,"div",13)(39,"label",11),n(40,"Email"),e(),a(41,"input",19),e(),t(42,"div",13)(43,"label",11),n(44,"Tel\xE9fono"),e(),a(45,"input",20),e(),t(46,"div",13)(47,"label",11),n(48,"Web"),e(),a(49,"input",21),e()()()(),p(50,G,2,0,"div",22)(51,A,2,1,"div",23),t(52,"button",24),p(53,k,1,0,"span",4),n(54," Guardar Cambios "),e()()}if(o&2){let i=c();g("formGroup",i.form),l(50),s(50,i.success()?50:-1),l(),s(51,i.error()?51:-1),l(),g("disabled",i.saving()),l(),s(53,i.saving()?53:-1)}}var K=(()=>{class o{fb;api;form;loading=m(!0);saving=m(!1);success=m(!1);error=m(null);constructor(i,r){this.fb=i,this.api=r,this.form=this.fb.group({name:["",C.required],taxId:["",C.required],address:[""],city:[""],postalCode:[""],country:["Espa\xF1a"],email:[""],phone:[""],website:[""]})}ngOnInit(){this.loadCompany()}loadCompany(){this.api.get("/companies/current").subscribe({next:i=>{this.form.patchValue(i),this.loading.set(!1)},error:()=>this.loading.set(!1)})}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving.set(!0),this.success.set(!1),this.error.set(null),this.api.put("/companies/current",this.form.value).subscribe({next:()=>{this.saving.set(!1),this.success.set(!0),setTimeout(()=>this.success.set(!1),3e3)},error:i=>{this.saving.set(!1),this.error.set(i.error?.message||"Error al guardar")}})}static \u0275fac=function(r){return new(r||o)(f(D),f(O))};static \u0275cmp=v({type:o,selectors:[["app-company-settings"]],standalone:!0,features:[y],decls:8,vars:1,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],[1,"text-center","p-lg"],[1,"spinner"],[3,"ngSubmit","formGroup"],[1,"card","mb-lg"],[1,"card-header"],[1,"card-body"],[1,"form-row"],[1,"form-group",2,"flex","2"],[1,"form-label"],["type","text","formControlName","name",1,"form-input"],[1,"form-group"],["type","text","formControlName","taxId","placeholder","B12345678",1,"form-input"],["type","text","formControlName","address",1,"form-input"],["type","text","formControlName","city",1,"form-input"],["type","text","formControlName","postalCode",1,"form-input"],["type","text","formControlName","country","value","Espa\xF1a",1,"form-input"],["type","email","formControlName","email",1,"form-input"],["type","text","formControlName","phone",1,"form-input"],["type","text","formControlName","website","placeholder","https://",1,"form-input"],[1,"alert","alert-success","mb-lg"],[1,"alert","alert-danger","mb-lg"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(r,u){r&1&&(t(0,"div",0)(1,"header",1)(2,"h1"),n(3,"Configuraci\xF3n de Empresa"),e(),t(4,"p",2),n(5,"Datos fiscales y configuraci\xF3n general"),e()(),p(6,V,2,0,"div",3)(7,j,55,5),e()),r&2&&(l(6),s(6,u.loading()?6:7))},dependencies:[E,I,w,F,N,M,T,P],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl);max-width:800px}.form-row[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md)}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--radius-md)}.alert-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.alert-danger[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}"]})}return o})();export{K as CompanySettingsComponent};
