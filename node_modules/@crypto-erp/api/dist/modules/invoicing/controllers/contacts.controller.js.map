{"version":3,"sources":["../../../../src/modules/invoicing/controllers/contacts.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Patch,\n  Delete,\n  Body,\n  Param,\n  Query,\n  UseGuards,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n  ApiParam,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard, TenantGuard } from '../../../common/guards/index.js';\nimport { CurrentCompany } from '../../../common/decorators/index.js';\nimport { ContactsService } from '../services/index.js';\nimport { CreateContactDto, QueryContactsDto } from '../dto/index.js';\n\n@ApiTags('Contacts')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard, TenantGuard)\n@Controller('contacts')\nexport class ContactsController {\n  constructor(private readonly contactsService: ContactsService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'List all contacts (customers/suppliers)' })\n  @ApiResponse({ status: 200, description: 'Returns paginated list of contacts' })\n  async findAll(\n    @CurrentCompany() companyId: string,\n    @Query() query: QueryContactsDto,\n  ) {\n    return this.contactsService.findAll(companyId, query);\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get contact by ID' })\n  @ApiParam({ name: 'id', description: 'Contact ID' })\n  @ApiResponse({ status: 200, description: 'Returns contact details' })\n  @ApiResponse({ status: 404, description: 'Contact not found' })\n  async findById(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.contactsService.findById(companyId, id);\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new contact' })\n  @ApiResponse({ status: 201, description: 'Contact created successfully' })\n  @ApiResponse({ status: 409, description: 'Contact with tax ID already exists' })\n  async create(\n    @CurrentCompany() companyId: string,\n    @Body() dto: CreateContactDto,\n  ) {\n    return this.contactsService.create(companyId, dto);\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update a contact' })\n  @ApiParam({ name: 'id', description: 'Contact ID' })\n  @ApiResponse({ status: 200, description: 'Contact updated successfully' })\n  @ApiResponse({ status: 404, description: 'Contact not found' })\n  async update(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n    @Body() dto: Partial<CreateContactDto>,\n  ) {\n    return this.contactsService.update(companyId, id, dto);\n  }\n\n  @Patch(':id/deactivate')\n  @ApiOperation({ summary: 'Deactivate a contact' })\n  @ApiParam({ name: 'id', description: 'Contact ID' })\n  @ApiResponse({ status: 200, description: 'Contact deactivated' })\n  @HttpCode(HttpStatus.OK)\n  async deactivate(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.contactsService.deactivate(companyId, id);\n  }\n\n  @Patch(':id/activate')\n  @ApiOperation({ summary: 'Activate a contact' })\n  @ApiParam({ name: 'id', description: 'Contact ID' })\n  @ApiResponse({ status: 200, description: 'Contact activated' })\n  @HttpCode(HttpStatus.OK)\n  async activate(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.contactsService.activate(companyId, id);\n  }\n\n  @Delete(':id')\n  @ApiOperation({ summary: 'Delete a contact' })\n  @ApiParam({ name: 'id', description: 'Contact ID' })\n  @ApiResponse({ status: 204, description: 'Contact deleted successfully' })\n  @ApiResponse({ status: 409, description: 'Cannot delete contact with invoices' })\n  @HttpCode(HttpStatus.NO_CONTENT)\n  async delete(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    await this.contactsService.delete(companyId, id);\n  }\n}\n"],"names":["ContactsController","findAll","companyId","query","contactsService","findById","id","create","dto","update","deactivate","activate","delete","summary","status","description","name","OK","NO_CONTENT"],"mappings":";;;;+BA8BaA;;;eAAAA;;;wBAjBN;yBAOA;uBACmC;wBACX;wBACC;wBACmB;;;;;;;;;;;;;;;AAM5C,IAAA,AAAMA,qBAAN,MAAMA;IAGX,MAGMC,QACJ,AAAkBC,SAAiB,EACnC,AAASC,KAAuB,EAChC;QACA,OAAO,IAAI,CAACC,eAAe,CAACH,OAAO,CAACC,WAAWC;IACjD;IAEA,MAKME,SACJ,AAAkBH,SAAiB,EACnC,AAAaI,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,eAAe,CAACC,QAAQ,CAACH,WAAWI;IAClD;IAEA,MAIMC,OACJ,AAAkBL,SAAiB,EACnC,AAAQM,GAAqB,EAC7B;QACA,OAAO,IAAI,CAACJ,eAAe,CAACG,MAAM,CAACL,WAAWM;IAChD;IAEA,MAKMC,OACJ,AAAkBP,SAAiB,EACnC,AAAaI,EAAU,EACvB,AAAQE,GAA8B,EACtC;QACA,OAAO,IAAI,CAACJ,eAAe,CAACK,MAAM,CAACP,WAAWI,IAAIE;IACpD;IAEA,MAKME,WACJ,AAAkBR,SAAiB,EACnC,AAAaI,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,eAAe,CAACM,UAAU,CAACR,WAAWI;IACpD;IAEA,MAKMK,SACJ,AAAkBT,SAAiB,EACnC,AAAaI,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,eAAe,CAACO,QAAQ,CAACT,WAAWI;IAClD;IAEA,MAMMM,OACJ,AAAkBV,SAAiB,EACnC,AAAaI,EAAU,EACvB;QACA,MAAM,IAAI,CAACF,eAAe,CAACQ,MAAM,CAACV,WAAWI;IAC/C;IAnFA,YAAY,AAAiBF,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AAoFlE;;;;QAjFkBS,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAUzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;6CACpBE;;;;;;;;;;;;;QASLJ,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;6CACpBE;;;;;;;;;;;;;QASLJ,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;6CACpBG"}