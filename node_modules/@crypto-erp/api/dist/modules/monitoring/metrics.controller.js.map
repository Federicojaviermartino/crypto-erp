{"version":3,"sources":["../../../src/modules/monitoring/metrics.controller.ts"],"sourcesContent":["import { Controller, Get } from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiExcludeEndpoint } from '@nestjs/swagger';\nimport { MetricsService } from './metrics.service.js';\n\n@ApiTags('monitoring')\n@Controller()\nexport class MetricsController {\n  constructor(private readonly metricsService: MetricsService) {}\n\n  /**\n   * Prometheus metrics endpoint\n   * This endpoint is scraped by Prometheus server\n   */\n  @Get('metrics')\n  @ApiExcludeEndpoint() // Don't show in Swagger\n  async getMetrics(): Promise<string> {\n    return this.metricsService.getMetrics();\n  }\n\n  /**\n   * Custom metrics summary (JSON format for dashboards)\n   */\n  @Get('metrics/summary')\n  @ApiOperation({\n    summary: 'Get metrics summary',\n    description: 'Returns a JSON summary of key metrics for custom dashboards',\n  })\n  async getMetricsSummary() {\n    // This could return a JSON version of key metrics\n    // Useful for custom dashboards or monitoring tools\n    return {\n      message: 'Use /metrics endpoint for Prometheus scraping',\n      endpoints: {\n        prometheus: '/metrics',\n        health: '/health',\n      },\n    };\n  }\n}\n"],"names":["MetricsController","getMetrics","metricsService","getMetricsSummary","message","endpoints","prometheus","health","summary","description"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANmB;yBAC0B;gCAC3B;;;;;;;;;;AAIxB,IAAA,AAAMA,oBAAN,MAAMA;IAGX;;;GAGC,GACD,MAEMC,aAA8B;QAClC,OAAO,IAAI,CAACC,cAAc,CAACD,UAAU;IACvC;IAEA;;GAEC,GACD,MAKME,oBAAoB;QACxB,kDAAkD;QAClD,mDAAmD;QACnD,OAAO;YACLC,SAAS;YACTC,WAAW;gBACTC,YAAY;gBACZC,QAAQ;YACV;QACF;IACF;IA9BA,YAAY,AAAiBL,cAA8B,CAAE;aAAhCA,iBAAAA;IAAiC;AA+BhE;;;;;;;;;;;QAdIM,SAAS;QACTC,aAAa"}