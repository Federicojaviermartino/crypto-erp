{"version":3,"sources":["../../../../../src/modules/invoicing/dto/invoices/create-invoice.dto.ts"],"sourcesContent":["import {\n  IsString,\n  IsOptional,\n  IsEnum,\n  IsDateString,\n  IsArray,\n  ValidateNested,\n  IsNumber,\n  Min,\n  Max,\n  IsUUID,\n  MaxLength,\n} from 'class-validator';\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { Type } from 'class-transformer';\n\nexport enum InvoiceType {\n  STANDARD = 'STANDARD',\n  RECTIFICATIVE = 'RECTIFICATIVE',\n  SIMPLIFIED = 'SIMPLIFIED',\n}\n\nexport class InvoiceLineDto {\n  @ApiProperty({ example: 'Consulting services' })\n  @IsString()\n  @MaxLength(500)\n  description: string;\n\n  @ApiProperty({ example: 2, minimum: 0 })\n  @IsNumber()\n  @Min(0)\n  quantity: number;\n\n  @ApiProperty({ example: 100.0, minimum: 0 })\n  @IsNumber()\n  @Min(0)\n  unitPrice: number;\n\n  @ApiPropertyOptional({ example: 21, description: 'VAT rate percentage' })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  @Max(100)\n  vatRate?: number;\n\n  @ApiPropertyOptional({ example: 0, description: 'Discount percentage' })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  @Max(100)\n  discountPercent?: number;\n\n  @ApiPropertyOptional({ description: 'Optional account code for accounting integration' })\n  @IsOptional()\n  @IsString()\n  accountCode?: string;\n}\n\nexport class CreateInvoiceDto {\n  @ApiPropertyOptional({ description: 'Contact (customer/supplier) ID' })\n  @IsOptional()\n  @IsUUID()\n  contactId?: string;\n\n  @ApiPropertyOptional({ description: 'Counterparty name (when no contact is selected)' })\n  @IsOptional()\n  @IsString()\n  @MaxLength(200)\n  counterpartyName?: string;\n\n  @ApiPropertyOptional({ description: 'Counterparty tax ID (NIF/CIF)' })\n  @IsOptional()\n  @IsString()\n  @MaxLength(20)\n  counterpartyTaxId?: string;\n\n  @ApiPropertyOptional({ description: 'Counterparty address' })\n  @IsOptional()\n  @IsString()\n  @MaxLength(500)\n  counterpartyAddress?: string;\n\n  @ApiPropertyOptional({ description: 'Counterparty city' })\n  @IsOptional()\n  @IsString()\n  @MaxLength(100)\n  counterpartyCity?: string;\n\n  @ApiPropertyOptional({ description: 'Counterparty country (ISO code)', example: 'ES' })\n  @IsOptional()\n  @IsString()\n  @MaxLength(2)\n  counterpartyCountry?: string;\n\n  @ApiPropertyOptional({ enum: InvoiceType, default: InvoiceType.STANDARD })\n  @IsOptional()\n  @IsEnum(InvoiceType)\n  type?: InvoiceType;\n\n  @ApiPropertyOptional({ description: 'Invoice series ID. If not provided, default series will be used' })\n  @IsOptional()\n  @IsUUID()\n  seriesId?: string;\n\n  @ApiProperty({ example: '2024-01-15', description: 'Invoice date' })\n  @IsDateString()\n  date: string;\n\n  @ApiPropertyOptional({ example: '2024-02-15', description: 'Due date for payment' })\n  @IsOptional()\n  @IsDateString()\n  dueDate?: string;\n\n  @ApiPropertyOptional({ description: 'Notes/description for the invoice' })\n  @IsOptional()\n  @IsString()\n  notes?: string;\n\n  @ApiPropertyOptional({ description: 'Original invoice number (for rectificative invoices)' })\n  @IsOptional()\n  @IsString()\n  originalInvoiceNumber?: string;\n\n  @ApiPropertyOptional({ description: 'Original invoice ID (for rectificative invoices)' })\n  @IsOptional()\n  @IsUUID()\n  originalInvoiceId?: string;\n\n  @ApiProperty({ type: [InvoiceLineDto], description: 'Invoice lines' })\n  @IsArray()\n  @ValidateNested({ each: true })\n  @Type(() => InvoiceLineDto)\n  lines: InvoiceLineDto[];\n}\n"],"names":["CreateInvoiceDto","InvoiceLineDto","InvoiceType","example","minimum","description","enum","default","type","each"],"mappings":";;;;;;;;;;;QA0DaA;eAAAA;;QApCAC;eAAAA;;QANDC;eAAAA;;;gCAJL;yBAC0C;kCAC5B;;;;;;;;;;AAEd,IAAA,AAAKA,qCAAAA;;;;WAAAA;;AAML,IAAA,AAAMD,iBAAN,MAAMA;AAkCb;;;QAjCiBE,SAAS;;;;;;;;QAKTA,SAAS;QAAGC,SAAS;;;;;;;;QAKrBD,SAAS;QAAOC,SAAS;;;;;;;;QAKjBD,SAAS;QAAIE,aAAa;;;;;;;;;;QAO1BF,SAAS;QAAGE,aAAa;;;;;;;;;;QAOzBA,aAAa;;;;;;AAM/B,IAAA,AAAML,mBAAN,MAAMA;AA2Eb;;;QA1EyBK,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;;QAMbA,aAAa;;;;;;;;;QAMbA,aAAa;;;;;;;;;QAMbA,aAAa;;;;;;;;;QAMbA,aAAa;QAAmCF,SAAS;;;;;;;;;QAMzDG,MAAMJ;QAAaK,OAAO;;;;;;;;QAK1BF,aAAa;;;;;;;;QAKrBF,SAAS;QAAcE,aAAa;;;;;;;QAI5BF,SAAS;QAAcE,aAAa;;;;;;;;QAKpCA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKrBG,MAAM;YAACP;SAAe;QAAEI,aAAa;;;;QAElCI,MAAM;;oCACZR"}