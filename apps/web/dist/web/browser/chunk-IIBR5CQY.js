import{d as N}from"./chunk-R5763NNK.js";import{c as $,e as q,l as W,m as R,n as Q,r as H}from"./chunk-OE3B74VB.js";import{a as U}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{$a as v,Da as x,Db as j,Fa as T,Fb as L,Gb as z,Ha as P,Ja as p,La as S,Ma as f,Na as E,Oa as t,Pa as e,Qa as O,Ra as k,Sa as M,Ta as c,U as F,Za as n,_a as m,aa as h,ba as y,bb as I,cb as V,db as B,fb as Y,hb as u,jb as g,ra as o,sa as A,xa as b}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";var G=(a,d)=>d.tipoMoneda+d.claveExchange;function J(a,d){if(a&1&&(t(0,"option",5),n(1),e()),a&2){let i=d.$implicit;T("value",i),o(),m(i)}}function K(a,d){a&1&&(t(0,"div",22)(1,"strong"),n(2,"\u26A0\uFE0F Atenci\xF3n:"),e(),n(3," El valor total supera 50.000 \u20AC. Est\xE1s obligado a presentar el Modelo 721 antes del 31 de marzo del a\xF1o siguiente al ejercicio fiscal. "),e())}function X(a,d){a&1&&(t(0,"p",28),n(1,"\u2705 Todos los datos est\xE1n completos para presentar el modelo."),e())}function Z(a,d){if(a&1&&(t(0,"li",29),n(1),e()),a&2){let i=d.$implicit;o(),m(i)}}function ee(a,d){if(a&1&&(t(0,"p",29),n(1,"\u274C Hay errores que corregir:"),e(),t(2,"ul"),f(3,Z,2,1,"li",29,S),e()),a&2){let i,l=c(3);o(3),E((i=l.validation())==null?null:i.errors)}}function te(a,d){if(a&1&&(t(0,"li",30),n(1),e()),a&2){let i=d.$implicit;o(),m(i)}}function ne(a,d){if(a&1&&(t(0,"p",30),n(1,"\u26A0\uFE0F Advertencias:"),e(),t(2,"ul"),f(3,te,2,1,"li",30,S),e()),a&2){let i,l=c(3);o(3),E((i=l.validation())==null?null:i.warnings)}}function ie(a,d){if(a&1&&(t(0,"div",23)(1,"div",14)(2,"h3"),n(3,"Validaci\xF3n"),e()(),t(4,"div",27),x(5,X,2,0,"p",28)(6,ee,5,0)(7,ne,5,0),e()()),a&2){let i,l,r=c(2);o(5),p(5,(i=r.validation())!=null&&i.valid?5:6),o(2),p(7,!((l=r.validation())==null||l.warnings==null)&&l.warnings.length?7:-1)}}function ae(a,d){if(a&1){let i=k();t(0,"div",18)(1,"div",19)(2,"span",20),n(3,"\u{1F4CB}"),e(),t(4,"div",21)(5,"h3"),n(6),e(),t(7,"p"),n(8,"Obligado a declarar"),e()()(),t(9,"div",19)(10,"span",20),n(11,"\u{1F4B0}"),e(),t(12,"div",21)(13,"h3"),n(14),u(15,"number"),e(),t(16,"p"),n(17,"Valor total a 31/12"),e()()(),t(18,"div",19)(19,"span",20),n(20,"\u{1F4CA}"),e(),t(21,"div",21)(22,"h3"),n(23),e(),t(24,"p"),n(25,"Posiciones en el extranjero"),e()()(),t(26,"div",19)(27,"span",20),n(28,"\u{1F4C8}"),e(),t(29,"div",21)(30,"h3"),n(31),e(),t(32,"p"),n(33,"Variaci\xF3n significativa"),e()()()(),x(34,K,4,0,"div",22)(35,ie,8,2,"div",23),t(36,"div",24)(37,"button",25),M("click",function(){h(i);let r=c();return y(r.exportCSV())}),n(38," \u{1F4E5} Exportar CSV "),e(),t(39,"button",26),M("click",function(){h(i);let r=c();return y(r.exportAEAT())}),n(40," \u{1F4C4} Exportar formato AEAT "),e()()}if(a&2){let i,l,r,C,_,D,w,s=c();o(),P("alert-danger",(i=s.modelo())==null?null:i.obligadoDeclarar),o(5),m((l=s.modelo())!=null&&l.obligadoDeclarar?"S\xED":"No"),o(8),v("",g(15,10,(r=s.modelo())==null?null:r.totalValorEur,"1.2-2")," \u20AC"),o(9),m(((C=s.modelo())==null||C.posiciones==null?null:C.posiciones.length)||0),o(3),P("alert-warning",(_=s.modelo())==null?null:_.variacionSignificativa),o(5),m((D=s.modelo())!=null&&D.variacionSignificativa?"S\xED":"No"),o(3),p(34,(w=s.modelo())!=null&&w.obligadoDeclarar?34:-1),o(),p(35,s.validation()?35:-1)}}function oe(a,d){a&1&&(t(0,"div",16),O(1,"span",31),e())}function le(a,d){if(a&1&&(t(0,"tr")(1,"td")(2,"div",34)(3,"strong"),n(4),e(),t(5,"small"),n(6),e()()(),t(7,"td"),n(8),e(),t(9,"td")(10,"span",35),n(11),e()(),t(12,"td",33),n(13),u(14,"number"),e(),t(15,"td",33),n(16),u(17,"number"),e(),t(18,"td",33),n(19),u(20,"number"),e(),t(21,"td"),n(22),u(23,"date"),e()()),a&2){let i=d.$implicit;o(4),m(i.tipoMoneda),o(2),m(i.nombreMoneda),o(2),m(i.nombreExchange),o(3),m(i.paisExchange),o(2),m(g(14,8,i.saldoAFinDeAno,"1.8-8")),o(3),v("",g(17,11,i.valorEurAFinDeAno,"1.2-2")," \u20AC"),o(3),v("",g(20,14,i.valorAdquisicionEur,"1.2-2")," \u20AC"),o(3),m(g(23,17,i.fechaAdquisicion,"shortDate"))}}function re(a,d){a&1&&(t(0,"tr")(1,"td",36),n(2," No tienes criptoactivos en el extranjero para este ejercicio "),e()())}function de(a,d){if(a&1&&(t(0,"tfoot")(1,"tr")(2,"td",37)(3,"strong"),n(4,"Total:"),e()(),t(5,"td",33)(6,"strong"),n(7),u(8,"number"),e()(),O(9,"td",38),e()()),a&2){let i,l=c(2);o(7),v("",g(8,1,(i=l.modelo())==null?null:i.totalValorEur,"1.2-2")," \u20AC")}}function me(a,d){if(a&1&&(t(0,"table",32)(1,"thead")(2,"tr")(3,"th"),n(4,"Criptomoneda"),e(),t(5,"th"),n(6,"Exchange/Wallet"),e(),t(7,"th"),n(8,"Pa\xEDs"),e(),t(9,"th",33),n(10,"Saldo 31/12"),e(),t(11,"th",33),n(12,"Valor EUR"),e(),t(13,"th",33),n(14,"Adquisici\xF3n"),e(),t(15,"th"),n(16,"Fecha Adq."),e()()(),t(17,"tbody"),f(18,le,24,20,"tr",null,G,!1,re,3,0,"tr"),e(),x(21,de,10,4,"tfoot"),e()),a&2){let i,l,r=c();o(18),E((i=r.modelo())==null?null:i.posiciones),o(3),p(21,!((l=r.modelo())==null||l.posiciones==null)&&l.posiciones.length?21:-1)}}var fe=(()=>{class a{api;modelo=b(null);validation=b(null);loading=b(!0);selectedYear=new Date().getFullYear()-1;availableYears=[];constructor(i){this.api=i;let l=new Date().getFullYear();for(let r=l-1;r>=2020;r--)this.availableYears.push(r)}ngOnInit(){this.loadData()}loadData(){this.loading.set(!0),this.api.get(`/fiscal/modelo721/${this.selectedYear}`).subscribe({next:i=>{this.modelo.set(i),this.loading.set(!1)},error:()=>{this.modelo.set(null),this.loading.set(!1)}}),this.api.get(`/fiscal/modelo721/${this.selectedYear}/validate`).subscribe({next:i=>this.validation.set(i),error:()=>this.validation.set(null)})}exportCSV(){window.open(`/api/fiscal/modelo721/${this.selectedYear}/export/csv`,"_blank")}exportAEAT(){window.open(`/api/fiscal/modelo721/${this.selectedYear}/export/aeat`,"_blank")}static \u0275fac=function(l){return new(l||a)(A(U))};static \u0275cmp=F({type:a,selectors:[["app-modelo721"]],standalone:!0,features:[Y],decls:52,vars:4,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],[1,"d-flex","gap-md"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"nav-tabs","mb-lg"],["routerLink","/crypto/portfolio",1,"nav-tab"],["routerLink","/crypto/wallets",1,"nav-tab"],["routerLink","/crypto/exchanges",1,"nav-tab"],["routerLink","/crypto/transactions",1,"nav-tab"],["routerLink","/crypto/assets",1,"nav-tab"],["routerLink","/crypto/tax-report",1,"nav-tab","active"],[1,"card"],[1,"card-header"],[1,"card-body",2,"padding","0"],[1,"text-center","p-lg"],[1,"info-section","mt-lg"],[1,"summary-cards"],[1,"summary-card"],[1,"summary-icon"],[1,"summary-info"],[1,"alert","alert-warning","mb-lg"],[1,"card","mb-lg"],[1,"d-flex","gap-md","mb-lg"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"card-body"],[1,"text-success"],[1,"text-danger"],[1,"text-warning"],[1,"spinner"],[1,"table"],[1,"text-right"],[1,"asset-info"],[1,"badge","badge-secondary"],["colspan","7",1,"text-center","text-muted","p-lg"],["colspan","4",1,"text-right"],["colspan","2"]],template:function(l,r){l&1&&(t(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),n(4,"Modelo 721 - Declaraci\xF3n de Criptoactivos"),e(),t(5,"p",2),n(6,"Declaraci\xF3n informativa sobre monedas virtuales situadas en el extranjero"),e()(),t(7,"div",3)(8,"select",4),B("ngModelChange",function(_){return V(r.selectedYear,_)||(r.selectedYear=_),_}),M("change",function(){return r.loadData()}),f(9,J,2,2,"option",5,S),e()()(),t(11,"div",6)(12,"a",7),n(13,"Portfolio"),e(),t(14,"a",8),n(15,"Wallets"),e(),t(16,"a",9),n(17,"Exchanges"),e(),t(18,"a",10),n(19,"Transacciones"),e(),t(20,"a",11),n(21,"Activos"),e(),t(22,"a",12),n(23,"Informe Fiscal"),e()(),x(24,ae,41,13),t(25,"div",13)(26,"div",14)(27,"h3"),n(28),e()(),t(29,"div",15),x(30,oe,2,0,"div",16)(31,me,22,2),e()(),t(32,"div",17)(33,"h4"),n(34,"Informaci\xF3n sobre el Modelo 721"),e(),t(35,"ul")(36,"li")(37,"strong"),n(38,"\xBFQu\xE9 es?"),e(),n(39," Declaraci\xF3n informativa sobre monedas virtuales situadas en el extranjero."),e(),t(40,"li")(41,"strong"),n(42,"\xBFQui\xE9n debe presentarlo?"),e(),n(43," Residentes fiscales en Espa\xF1a con criptoactivos en exchanges extranjeros cuyo valor supere 50.000 \u20AC."),e(),t(44,"li")(45,"strong"),n(46,"\xBFCu\xE1ndo?"),e(),n(47," Entre el 1 de enero y el 31 de marzo del a\xF1o siguiente al ejercicio."),e(),t(48,"li")(49,"strong"),n(50,"Variaci\xF3n significativa:"),e(),n(51," Se debe presentar si el valor aumenta m\xE1s de 20.000 \u20AC respecto al a\xF1o anterior."),e()()()()),l&2&&(o(8),I("ngModel",r.selectedYear),o(),E(r.availableYears),o(15),p(24,r.modelo()?24:-1),o(4),v("Posiciones en el Extranjero - Ejercicio ",r.selectedYear,""),o(2),p(30,r.loading()?30:31))},dependencies:[z,L,j,N,H,R,Q,W,$,q],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-xl)}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-md);margin-bottom:var(--spacing-xl)}.summary-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-lg);background:var(--white);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm)}.summary-card.alert-danger[_ngcontent-%COMP%]{background:var(--danger-light);border:1px solid var(--danger)}.summary-card.alert-warning[_ngcontent-%COMP%]{background:var(--warning-light);border:1px solid var(--warning)}.summary-card[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{font-size:2rem}.summary-card[_ngcontent-%COMP%]   .summary-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.summary-card[_ngcontent-%COMP%]   .summary-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--gray-500);font-size:.875rem}.nav-tabs[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);border-bottom:2px solid var(--gray-200);padding-bottom:var(--spacing-sm)}.nav-tab[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-lg);color:var(--gray-500);text-decoration:none;border-bottom:2px solid transparent;margin-bottom:-10px;transition:all var(--transition-fast)}.nav-tab[_ngcontent-%COMP%]:hover{color:var(--gray-700)}.nav-tab.active[_ngcontent-%COMP%]{color:var(--primary);border-bottom-color:var(--primary)}.asset-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.asset-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--gray-500)}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.badge.badge-secondary[_ngcontent-%COMP%]{background:var(--gray-200);color:var(--gray-700)}.alert[_ngcontent-%COMP%]{padding:var(--spacing-md);border-radius:var(--radius-md)}.alert.alert-warning[_ngcontent-%COMP%]{background:var(--warning-light);color:var(--warning-dark);border:1px solid var(--warning)}.form-control[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--gray-300);border-radius:var(--radius-md);font-size:1rem}.info-section[_ngcontent-%COMP%]{background:var(--gray-50);padding:var(--spacing-lg);border-radius:var(--radius-md)}.info-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.info-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:var(--spacing-lg)}.info-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.text-success[_ngcontent-%COMP%]{color:var(--success)}.text-danger[_ngcontent-%COMP%]{color:var(--danger)}.text-warning[_ngcontent-%COMP%]{color:var(--warning)}"]})}return a})();export{fe as Modelo721Component};
