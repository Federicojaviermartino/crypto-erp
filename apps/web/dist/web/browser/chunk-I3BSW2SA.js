import{a as k}from"./chunk-JU2KEDBD.js";import"./chunk-FXBJWTCM.js";import{$a as L,Da as x,Db as w,Gb as M,Ia as v,Ja as C,Ma as Y,Na as E,Oa as t,Pa as i,Qa as S,Ra as b,Sa as m,Ta as c,U as h,Za as a,_a as p,aa as _,ba as f,fb as T,hb as F,jb as g,ra as o,sa as y,xa as u}from"./chunk-2V2B4KT2.js";import"./chunk-35PI25VP.js";var $=(n,r)=>r.id;function I(n,r){n&1&&(t(0,"div",6),S(1,"span",7),i())}function A(n,r){if(n&1){let e=b();t(0,"button",11),m("click",function(){_(e);let l=c().$implicit,d=c(2);return f(d.closeYear(l))}),a(1," Cerrar A\xF1o "),i()}}function V(n,r){if(n&1){let e=b();t(0,"button",11),m("click",function(){_(e);let l=c().$implicit,d=c(2);return f(d.reopenYear(l))}),a(1," Reabrir "),i()}}function D(n,r){if(n&1&&(t(0,"tr")(1,"td")(2,"strong"),a(3),i()(),t(4,"td"),a(5),F(6,"date"),i(),t(7,"td"),a(8),F(9,"date"),i(),t(10,"td")(11,"span",9),a(12),i()(),t(13,"td"),x(14,A,2,0,"button",10)(15,V,2,0),i()()),n&2){let e=r.$implicit;o(3),p(e.name),o(2),p(g(6,7,e.startDate,"dd/MM/yyyy")),o(3),p(g(9,10,e.endDate,"dd/MM/yyyy")),o(3),v(e.isClosed?"badge-secondary":"badge-success"),o(),L(" ",e.isClosed?"Cerrado":"Abierto"," "),o(2),C(14,e.isClosed?15:14)}}function j(n,r){n&1&&(t(0,"tr")(1,"td",12),a(2," No hay a\xF1os fiscales configurados "),i()())}function N(n,r){if(n&1&&(t(0,"table",8)(1,"thead")(2,"tr")(3,"th"),a(4,"Nombre"),i(),t(5,"th"),a(6,"Fecha Inicio"),i(),t(7,"th"),a(8,"Fecha Fin"),i(),t(9,"th"),a(10,"Estado"),i(),t(11,"th"),a(12,"Acciones"),i()()(),t(13,"tbody"),Y(14,D,16,13,"tr",null,$,!1,j,3,0,"tr"),i()()),n&2){let e=c();o(14),E(e.fiscalYears())}}var z=(()=>{class n{api;fiscalYears=u([]);loading=u(!0);showCreateForm=!1;constructor(e){this.api=e}ngOnInit(){this.loadFiscalYears()}loadFiscalYears(){this.loading.set(!0),this.api.get("/fiscal-years").subscribe({next:e=>{this.fiscalYears.set(e),this.loading.set(!1)},error:()=>this.loading.set(!1)})}closeYear(e){confirm(`\xBFCerrar el a\xF1o fiscal ${e.name}?`)&&this.api.patch(`/fiscal-years/${e.id}/close`,{}).subscribe({next:()=>this.loadFiscalYears()})}reopenYear(e){confirm(`\xBFReabrir el a\xF1o fiscal ${e.name}?`)&&this.api.patch(`/fiscal-years/${e.id}/reopen`,{}).subscribe({next:()=>this.loadFiscalYears()})}static \u0275fac=function(s){return new(s||n)(y(k))};static \u0275cmp=h({type:n,selectors:[["app-fiscal-years-list"]],standalone:!0,features:[T],decls:13,vars:1,consts:[[1,"page"],[1,"page-header"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"card"],[1,"card-body",2,"padding","0"],[1,"text-center","p-lg"],[1,"spinner"],[1,"table"],[1,"badge"],[1,"btn","btn-sm","btn-secondary"],[1,"btn","btn-sm","btn-secondary",3,"click"],["colspan","5",1,"text-center","text-muted","p-lg"]],template:function(s,l){s&1&&(t(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),a(4,"A\xF1os Fiscales"),i(),t(5,"p",2),a(6,"Gestiona los ejercicios contables"),i()(),t(7,"button",3),m("click",function(){return l.showCreateForm=!0}),a(8," + Nuevo A\xF1o Fiscal "),i()(),t(9,"div",4)(10,"div",5),x(11,I,2,0,"div",6)(12,N,17,1),i()()()),s&2&&(o(11),C(11,l.loading()?11:12))},dependencies:[M,w],styles:[".page[_ngcontent-%COMP%]{padding:var(--spacing-xl)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-lg)}"]})}return n})();export{z as FiscalYearsListComponent};
