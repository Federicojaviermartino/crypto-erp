{"version":3,"sources":["../../../../src/modules/crypto/controllers/crypto-assets.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  UseGuards,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n  ApiParam,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard, TenantGuard } from '../../../common/guards/index.js';\nimport { CurrentCompany } from '../../../common/decorators/index.js';\nimport { CryptoAssetsService } from '../services/index.js';\nimport { CreateCryptoAssetDto } from '../dto/index.js';\n\n@ApiTags('Crypto Assets')\n@ApiBearerAuth()\n@UseGuards(JwtAuthGuard, TenantGuard)\n@Controller('crypto/assets')\nexport class CryptoAssetsController {\n  constructor(private readonly cryptoAssetsService: CryptoAssetsService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'List all crypto assets' })\n  @ApiResponse({ status: 200, description: 'Returns list of crypto assets' })\n  async findAll(@CurrentCompany() companyId: string) {\n    return this.cryptoAssetsService.findAll(companyId);\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get crypto asset by ID' })\n  @ApiParam({ name: 'id', description: 'Asset ID' })\n  @ApiResponse({ status: 200, description: 'Returns asset details' })\n  @ApiResponse({ status: 404, description: 'Asset not found' })\n  async findById(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    return this.cryptoAssetsService.findById(companyId, id);\n  }\n\n  @Get('symbol/:symbol')\n  @ApiOperation({ summary: 'Get crypto asset by symbol' })\n  @ApiParam({ name: 'symbol', description: 'Asset symbol (e.g., BTC, ETH)' })\n  @ApiResponse({ status: 200, description: 'Returns asset details' })\n  async findBySymbol(\n    @CurrentCompany() companyId: string,\n    @Param('symbol') symbol: string,\n  ) {\n    const asset = await this.cryptoAssetsService.findBySymbol(companyId, symbol);\n    if (!asset) {\n      return { error: 'Asset not found', symbol };\n    }\n    return asset;\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new crypto asset' })\n  @ApiResponse({ status: 201, description: 'Asset created successfully' })\n  @ApiResponse({ status: 409, description: 'Asset with symbol already exists' })\n  async create(\n    @CurrentCompany() companyId: string,\n    @Body() dto: CreateCryptoAssetDto,\n  ) {\n    return this.cryptoAssetsService.create(companyId, dto);\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update a crypto asset' })\n  @ApiParam({ name: 'id', description: 'Asset ID' })\n  @ApiResponse({ status: 200, description: 'Asset updated successfully' })\n  @ApiResponse({ status: 404, description: 'Asset not found' })\n  async update(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n    @Body() dto: Partial<CreateCryptoAssetDto>,\n  ) {\n    return this.cryptoAssetsService.update(companyId, id, dto);\n  }\n\n  @Delete(':id')\n  @ApiOperation({ summary: 'Delete a crypto asset' })\n  @ApiParam({ name: 'id', description: 'Asset ID' })\n  @ApiResponse({ status: 204, description: 'Asset deleted successfully' })\n  @ApiResponse({ status: 409, description: 'Cannot delete asset with transactions' })\n  @HttpCode(HttpStatus.NO_CONTENT)\n  async delete(\n    @CurrentCompany() companyId: string,\n    @Param('id') id: string,\n  ) {\n    await this.cryptoAssetsService.delete(companyId, id);\n  }\n}\n"],"names":["CryptoAssetsController","findAll","companyId","cryptoAssetsService","findById","id","findBySymbol","symbol","asset","error","create","dto","update","delete","summary","status","description","name","NO_CONTENT"],"mappings":";;;;+BA4BaA;;;eAAAA;;;wBAjBN;yBAOA;uBACmC;wBACX;wBACK;wBACC;;;;;;;;;;;;;;;AAM9B,IAAA,AAAMA,yBAAN,MAAMA;IAGX,MAGMC,QAAQ,AAAkBC,SAAiB,EAAE;QACjD,OAAO,IAAI,CAACC,mBAAmB,CAACF,OAAO,CAACC;IAC1C;IAEA,MAKME,SACJ,AAAkBF,SAAiB,EACnC,AAAaG,EAAU,EACvB;QACA,OAAO,IAAI,CAACF,mBAAmB,CAACC,QAAQ,CAACF,WAAWG;IACtD;IAEA,MAIMC,aACJ,AAAkBJ,SAAiB,EACnC,AAAiBK,MAAc,EAC/B;QACA,MAAMC,QAAQ,MAAM,IAAI,CAACL,mBAAmB,CAACG,YAAY,CAACJ,WAAWK;QACrE,IAAI,CAACC,OAAO;YACV,OAAO;gBAAEC,OAAO;gBAAmBF;YAAO;QAC5C;QACA,OAAOC;IACT;IAEA,MAIME,OACJ,AAAkBR,SAAiB,EACnC,AAAQS,GAAyB,EACjC;QACA,OAAO,IAAI,CAACR,mBAAmB,CAACO,MAAM,CAACR,WAAWS;IACpD;IAEA,MAKMC,OACJ,AAAkBV,SAAiB,EACnC,AAAaG,EAAU,EACvB,AAAQM,GAAkC,EAC1C;QACA,OAAO,IAAI,CAACR,mBAAmB,CAACS,MAAM,CAACV,WAAWG,IAAIM;IACxD;IAEA,MAMME,OACJ,AAAkBX,SAAiB,EACnC,AAAaG,EAAU,EACvB;QACA,MAAM,IAAI,CAACF,mBAAmB,CAACU,MAAM,CAACX,WAAWG;IACnD;IAvEA,YAAY,AAAiBF,mBAAwC,CAAE;aAA1CA,sBAAAA;IAA2C;AAwE1E;;;;QArEkBW,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAMzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAUD,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAazBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QASzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;;;QAUzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;6CACpBE"}