{"version":3,"sources":["../../../src/modules/auth/auth.controller.ts"],"sourcesContent":["import { Controller, Post, Get, Body, UseGuards } from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n} from '@nestjs/swagger';\nimport { AuthService } from './auth.service.js';\nimport {\n  RegisterDto,\n  LoginDto,\n  RefreshTokenDto,\n  TokenResponseDto,\n} from './dto/index.js';\nimport { Public, CurrentUser, JwtPayload } from '../../common/index.js';\nimport { JwtAuthGuard } from '../../common/guards/jwt-auth.guard.js';\n\n@ApiTags('auth')\n@Controller('auth')\nexport class AuthController {\n  constructor(private authService: AuthService) {}\n\n  @Public()\n  @Post('register')\n  @ApiOperation({ summary: 'Register a new user' })\n  @ApiResponse({ status: 201, type: TokenResponseDto })\n  @ApiResponse({ status: 409, description: 'Email already exists' })\n  async register(@Body() dto: RegisterDto): Promise<TokenResponseDto> {\n    return this.authService.register(dto);\n  }\n\n  @Public()\n  @Post('login')\n  @ApiOperation({ summary: 'Login with email and password' })\n  @ApiResponse({ status: 200, type: TokenResponseDto })\n  @ApiResponse({ status: 401, description: 'Invalid credentials' })\n  async login(@Body() dto: LoginDto): Promise<TokenResponseDto> {\n    return this.authService.login(dto);\n  }\n\n  @Public()\n  @Post('refresh')\n  @ApiOperation({ summary: 'Refresh access token' })\n  @ApiResponse({ status: 200, type: TokenResponseDto })\n  @ApiResponse({ status: 401, description: 'Invalid refresh token' })\n  async refresh(@Body() dto: RefreshTokenDto): Promise<TokenResponseDto> {\n    return this.authService.refreshTokens(dto.refreshToken);\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('me')\n  @ApiBearerAuth('access-token')\n  @ApiOperation({ summary: 'Get current user profile' })\n  @ApiResponse({ status: 200, description: 'User profile with companies' })\n  @ApiResponse({ status: 401, description: 'Unauthorized' })\n  async me(@CurrentUser() user: JwtPayload) {\n    return this.authService.getMe(user.sub);\n  }\n}\n"],"names":["AuthController","register","dto","authService","login","refresh","refreshTokens","refreshToken","me","user","getMe","sub","summary","status","type","TokenResponseDto","description"],"mappings":";;;;+BAmBaA;;;eAAAA;;;wBAnB0C;yBAMhD;6BACqB;uBAMrB;wBACyC;8BACnB;;;;;;;;;;;;;;;AAItB,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MAKMC,SAAS,AAAQC,GAAgB,EAA6B;QAClE,OAAO,IAAI,CAACC,WAAW,CAACF,QAAQ,CAACC;IACnC;IAEA,MAKME,MAAM,AAAQF,GAAa,EAA6B;QAC5D,OAAO,IAAI,CAACC,WAAW,CAACC,KAAK,CAACF;IAChC;IAEA,MAKMG,QAAQ,AAAQH,GAAoB,EAA6B;QACrE,OAAO,IAAI,CAACC,WAAW,CAACG,aAAa,CAACJ,IAAIK,YAAY;IACxD;IAEA,MAMMC,GAAG,AAAeC,IAAgB,EAAE;QACxC,OAAO,IAAI,CAACN,WAAW,CAACO,KAAK,CAACD,KAAKE,GAAG;IACxC;IArCA,YAAY,AAAQR,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AAsCjD;;;;;QAlCkBS,SAAS;;;QACVC,QAAQ;QAAKC,MAAMC,uBAAgB;;;QACnCF,QAAQ;QAAKG,aAAa;;;;;;;;;;;;;QAOzBJ,SAAS;;;QACVC,QAAQ;QAAKC,MAAMC,uBAAgB;;;QACnCF,QAAQ;QAAKG,aAAa;;;;;;;;;;;;;QAOzBJ,SAAS;;;QACVC,QAAQ;QAAKC,MAAMC,uBAAgB;;;QACnCF,QAAQ;QAAKG,aAAa;;;;;;;;;;;;;;QAQzBJ,SAAS;;;QACVC,QAAQ;QAAKG,aAAa;;;QAC1BH,QAAQ;QAAKG,aAAa"}